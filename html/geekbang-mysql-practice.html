<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MySQL实战45讲</title>
<meta name="author" content="dirtysalt" />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="/themes/favicon.ico" /><link rel="stylesheet" type="text/css" href="/themes/simple.css"/></head>
<body>
<div id="content" class="content">
<h1 class="title">MySQL实战45讲</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org85e0ed1">开篇词 | 这一次，让我们一起来搞懂MySQL</a></li>
<li><a href="#orgd428efb">01 | 基础架构：一条SQL查询语句是如何执行的？</a></li>
<li><a href="#orga6cb4ca">02  | 日志系统：一条SQL更新语句是如何执行的？</a></li>
<li><a href="#orga30b92c">03 | 事务隔离：为什么你改了我还看不见？</a></li>
<li><a href="#org1fc38ff">04 | 深入浅出索引（上）</a></li>
<li><a href="#org6a8fa22">05 | 深入浅出索引（下）</a></li>
<li><a href="#org6db3c17">06 | 全局锁和表锁 ：给表加个字段怎么有这么多阻碍？</a></li>
<li><a href="#org72c3273">07 | 行锁功过：怎么减少行锁对性能的影响？</a></li>
<li><a href="#orgc536fe4">08 | 事务到底是隔离的还是不隔离的？</a></li>
<li><a href="#org4143720">09 | 普通索引和唯一索引，应该怎么选择？</a></li>
<li><a href="#orgc191485">10 | MySQL为什么有时候会选错索引？</a></li>
<li><a href="#org6dc3a53">11 |  怎么给字符串字段加索引？</a></li>
<li><a href="#orge677385">12 | 为什么我的MySQL会“抖”一下？</a></li>
<li><a href="#org3e04191">13 | 为什么表数据删掉一半，表文件大小不变？</a></li>
<li><a href="#org89b639e">14 | count(*)这么慢，我该怎么办？</a></li>
<li><a href="#org976e22d">15 | 答疑文章（一）：日志和索引相关问题</a></li>
<li><a href="#orgb187b35">16 | “order by”是怎么工作的？</a></li>
<li><a href="#org13ba7d4">17 | 如何正确地显示随机消息？</a></li>
<li><a href="#org2e172fe">18 | 为什么这些SQL语句逻辑相同，性能却差异巨大？</a></li>
<li><a href="#org233c8cc">19 | 为什么我只查一行的语句，也执行这么慢？</a></li>
<li><a href="#orgc6b6f19">20 | 幻读是什么，幻读有什么问题？</a></li>
<li><a href="#org524e37c">21 | 为什么我只改一行的语句，锁这么多？</a></li>
<li><a href="#orgfbfcfe2">22 | MySQL有哪些“饮鸩止渴”提高性能的方法？</a></li>
<li><a href="#orgdba0994">23 | MySQL是怎么保证数据不丢的？</a></li>
<li><a href="#orgdffb16a">24 | MySQL是怎么保证主备一致的？</a></li>
<li><a href="#org0400e5c">25 | MySQL是怎么保证高可用的？</a></li>
<li><a href="#org25070bb">26 | 备库为什么会延迟好几个小时？</a></li>
<li><a href="#orgb5db573">27 | 主库出问题了，从库怎么办？</a></li>
<li><a href="#org7a311fc">28 | 读写分离有哪些坑？</a></li>
<li><a href="#org53fc24c">29 | 如何判断一个数据库是不是出问题了？</a></li>
<li><a href="#org416bb7c">30 | 答疑文章（二）：用动态的观点看加锁</a></li>
<li><a href="#orgc4ad5c3">31 | 误删数据后除了跑路，还能怎么办？</a></li>
<li><a href="#orgfda0186">32 | 为什么还有kill不掉的语句？</a></li>
<li><a href="#orgcbaf639">33 | 我查这么多数据，会不会把数据库内存打爆？</a></li>
<li><a href="#orgc0c93f2">34 | 到底可不可以使用join？</a></li>
<li><a href="#orgb99ccd0">35 | join语句怎么优化？</a></li>
<li><a href="#orgb05fac0">36 | 为什么临时表可以重名？</a></li>
<li><a href="#org11f74ad">37 | 什么时候会使用内部临时表？</a></li>
<li><a href="#org765a11f">38 | 都说InnoDB好，那还要不要使用Memory引擎？</a></li>
<li><a href="#org02620bf">39 | 自增主键为什么不是连续的？</a></li>
<li><a href="#orgc3fb253">40 | insert语句的锁为什么这么多？</a></li>
<li><a href="#org03ed445">41 | 怎么最快地复制一张表？</a></li>
<li><a href="#orgd4a2e5e">42 | grant之后要跟着flush privileges吗？</a></li>
<li><a href="#org59d80cb">43 | 要不要使用分区表？</a></li>
<li><a href="#org0647330">44 | 答疑文章（三）：说一说这些好问题</a></li>
<li><a href="#org6f1b4bb">45 | 自增id用完怎么办？</a></li>
<li><a href="#org05322df">直播回顾 | 林晓斌：我的 MySQL 心路历程</a></li>
<li><a href="#org560747d">结束语 | 点线网面，一起构建MySQL知识网络</a></li>
</ul>
</div>
</div>

<div id="outline-container-org85e0ed1" class="outline-2">
<h2 id="org85e0ed1"><a href="https://time.geekbang.org/column/article/67888">开篇词 | 这一次，让我们一起来搞懂MySQL</a></h2>
<div class="outline-text-2" id="text-org85e0ed1">
<p>
开篇词 | 这一次，让我们一起来搞懂MySQL
</p>
</div>
</div>

<div id="outline-container-orgd428efb" class="outline-2">
<h2 id="orgd428efb"><a href="https://time.geekbang.org/column/article/68319">01 | 基础架构：一条SQL查询语句是如何执行的？</a></h2>
<div class="outline-text-2" id="text-orgd428efb">
<p>
01 | 基础架构：一条SQL查询语句是如何执行的？
</p>
</div>
</div>

<div id="outline-container-orga6cb4ca" class="outline-2">
<h2 id="orga6cb4ca"><a href="https://time.geekbang.org/column/article/68633">02  | 日志系统：一条SQL更新语句是如何执行的？</a></h2>
<div class="outline-text-2" id="text-orga6cb4ca">
<p>
02  | 日志系统：一条SQL更新语句是如何执行的？
</p>
</div>
</div>

<div id="outline-container-orga30b92c" class="outline-2">
<h2 id="orga30b92c"><a href="https://time.geekbang.org/column/article/68963">03 | 事务隔离：为什么你改了我还看不见？</a></h2>
<div class="outline-text-2" id="text-orga30b92c">
<p>
03 | 事务隔离：为什么你改了我还看不见？
</p>
</div>
</div>

<div id="outline-container-org1fc38ff" class="outline-2">
<h2 id="org1fc38ff"><a href="https://time.geekbang.org/column/article/69236">04 | 深入浅出索引（上）</a></h2>
<div class="outline-text-2" id="text-org1fc38ff">
<p>
04 | 深入浅出索引（上）
</p>
</div>
</div>

<div id="outline-container-org6a8fa22" class="outline-2">
<h2 id="org6a8fa22"><a href="https://time.geekbang.org/column/article/69636">05 | 深入浅出索引（下）</a></h2>
<div class="outline-text-2" id="text-org6a8fa22">
<p>
05 | 深入浅出索引（下）
</p>
</div>
</div>

<div id="outline-container-org6db3c17" class="outline-2">
<h2 id="org6db3c17"><a href="https://time.geekbang.org/column/article/69862">06 | 全局锁和表锁 ：给表加个字段怎么有这么多阻碍？</a></h2>
<div class="outline-text-2" id="text-org6db3c17">
<p>
06 | 全局锁和表锁 ：给表加个字段怎么有这么多阻碍？
</p>
</div>
</div>

<div id="outline-container-org72c3273" class="outline-2">
<h2 id="org72c3273"><a href="https://time.geekbang.org/column/article/70215">07 | 行锁功过：怎么减少行锁对性能的影响？</a></h2>
<div class="outline-text-2" id="text-org72c3273">
<p>
07 | 行锁功过：怎么减少行锁对性能的影响？
</p>
</div>
</div>

<div id="outline-container-orgc536fe4" class="outline-2">
<h2 id="orgc536fe4"><a href="https://time.geekbang.org/column/article/70562">08 | 事务到底是隔离的还是不隔离的？</a></h2>
<div class="outline-text-2" id="text-orgc536fe4">
<p>
08 | 事务到底是隔离的还是不隔离的？
</p>
</div>
</div>

<div id="outline-container-org4143720" class="outline-2">
<h2 id="org4143720"><a href="https://time.geekbang.org/column/article/70848">09 | 普通索引和唯一索引，应该怎么选择？</a></h2>
<div class="outline-text-2" id="text-org4143720">
<p>
09 | 普通索引和唯一索引，应该怎么选择？
</p>
</div>
</div>

<div id="outline-container-orgc191485" class="outline-2">
<h2 id="orgc191485"><a href="https://time.geekbang.org/column/article/71173">10 | MySQL为什么有时候会选错索引？</a></h2>
<div class="outline-text-2" id="text-orgc191485">
<p>
10 | MySQL为什么有时候会选错索引？
</p>
</div>
</div>

<div id="outline-container-org6dc3a53" class="outline-2">
<h2 id="org6dc3a53"><a href="https://time.geekbang.org/column/article/71492">11 |  怎么给字符串字段加索引？</a></h2>
<div class="outline-text-2" id="text-org6dc3a53">
<p>
11 |  怎么给字符串字段加索引？
</p>
</div>
</div>

<div id="outline-container-orge677385" class="outline-2">
<h2 id="orge677385"><a href="https://time.geekbang.org/column/article/71806">12 | 为什么我的MySQL会“抖”一下？</a></h2>
<div class="outline-text-2" id="text-orge677385">
<p>
12 | 为什么我的MySQL会“抖”一下？
</p>
</div>
</div>

<div id="outline-container-org3e04191" class="outline-2">
<h2 id="org3e04191"><a href="https://time.geekbang.org/column/article/72388">13 | 为什么表数据删掉一半，表文件大小不变？</a></h2>
<div class="outline-text-2" id="text-org3e04191">
<p>
13 | 为什么表数据删掉一半，表文件大小不变？
</p>
</div>
</div>

<div id="outline-container-org89b639e" class="outline-2">
<h2 id="org89b639e"><a href="https://time.geekbang.org/column/article/72775">14 | count(*)这么慢，我该怎么办？</a></h2>
<div class="outline-text-2" id="text-org89b639e">
<p>
14 | count(*)这么慢，我该怎么办？
</p>
</div>
</div>

<div id="outline-container-org976e22d" class="outline-2">
<h2 id="org976e22d"><a href="https://time.geekbang.org/column/article/73161">15 | 答疑文章（一）：日志和索引相关问题</a></h2>
<div class="outline-text-2" id="text-org976e22d">
<p>
15 | 答疑文章（一）：日志和索引相关问题
</p>
</div>
</div>

<div id="outline-container-orgb187b35" class="outline-2">
<h2 id="orgb187b35"><a href="https://time.geekbang.org/column/article/73479">16 | “order by”是怎么工作的？</a></h2>
<div class="outline-text-2" id="text-orgb187b35">
<p>
16 | “order by”是怎么工作的？
</p>
</div>
</div>

<div id="outline-container-org13ba7d4" class="outline-2">
<h2 id="org13ba7d4"><a href="https://time.geekbang.org/column/article/73795">17 | 如何正确地显示随机消息？</a></h2>
<div class="outline-text-2" id="text-org13ba7d4">
<p>
17 | 如何正确地显示随机消息？
</p>
</div>
</div>

<div id="outline-container-org2e172fe" class="outline-2">
<h2 id="org2e172fe"><a href="https://time.geekbang.org/column/article/74059">18 | 为什么这些SQL语句逻辑相同，性能却差异巨大？</a></h2>
<div class="outline-text-2" id="text-org2e172fe">
<p>
18 | 为什么这些SQL语句逻辑相同，性能却差异巨大？
</p>
</div>
</div>

<div id="outline-container-org233c8cc" class="outline-2">
<h2 id="org233c8cc"><a href="https://time.geekbang.org/column/article/74687">19 | 为什么我只查一行的语句，也执行这么慢？</a></h2>
<div class="outline-text-2" id="text-org233c8cc">
<p>
19 | 为什么我只查一行的语句，也执行这么慢？
</p>
</div>
</div>

<div id="outline-container-orgc6b6f19" class="outline-2">
<h2 id="orgc6b6f19"><a href="https://time.geekbang.org/column/article/75173">20 | 幻读是什么，幻读有什么问题？</a></h2>
<div class="outline-text-2" id="text-orgc6b6f19">
<p>
20 | 幻读是什么，幻读有什么问题？
</p>
</div>
</div>

<div id="outline-container-org524e37c" class="outline-2">
<h2 id="org524e37c"><a href="https://time.geekbang.org/column/article/75659">21 | 为什么我只改一行的语句，锁这么多？</a></h2>
<div class="outline-text-2" id="text-org524e37c">
<p>
21 | 为什么我只改一行的语句，锁这么多？
</p>
</div>
</div>

<div id="outline-container-orgfbfcfe2" class="outline-2">
<h2 id="orgfbfcfe2"><a href="https://time.geekbang.org/column/article/75746">22 | MySQL有哪些“饮鸩止渴”提高性能的方法？</a></h2>
<div class="outline-text-2" id="text-orgfbfcfe2">
<p>
22 | MySQL有哪些“饮鸩止渴”提高性能的方法？
</p>
</div>
</div>

<div id="outline-container-orgdba0994" class="outline-2">
<h2 id="orgdba0994"><a href="https://time.geekbang.org/column/article/76161">23 | MySQL是怎么保证数据不丢的？</a></h2>
<div class="outline-text-2" id="text-orgdba0994">
<p>
23 | MySQL是怎么保证数据不丢的？
</p>
</div>
</div>

<div id="outline-container-orgdffb16a" class="outline-2">
<h2 id="orgdffb16a"><a href="https://time.geekbang.org/column/article/76446">24 | MySQL是怎么保证主备一致的？</a></h2>
<div class="outline-text-2" id="text-orgdffb16a">
<p>
24 | MySQL是怎么保证主备一致的？
</p>
</div>
</div>

<div id="outline-container-org0400e5c" class="outline-2">
<h2 id="org0400e5c"><a href="https://time.geekbang.org/column/article/76795">25 | MySQL是怎么保证高可用的？</a></h2>
<div class="outline-text-2" id="text-org0400e5c">
<p>
25 | MySQL是怎么保证高可用的？
</p>
</div>
</div>

<div id="outline-container-org25070bb" class="outline-2">
<h2 id="org25070bb"><a href="https://time.geekbang.org/column/article/77083">26 | 备库为什么会延迟好几个小时？</a></h2>
<div class="outline-text-2" id="text-org25070bb">
<p>
26 | 备库为什么会延迟好几个小时？
</p>
</div>
</div>

<div id="outline-container-orgb5db573" class="outline-2">
<h2 id="orgb5db573"><a href="https://time.geekbang.org/column/article/77427">27 | 主库出问题了，从库怎么办？</a></h2>
<div class="outline-text-2" id="text-orgb5db573">
<p>
27 | 主库出问题了，从库怎么办？
</p>
</div>
</div>

<div id="outline-container-org7a311fc" class="outline-2">
<h2 id="org7a311fc"><a href="https://time.geekbang.org/column/article/77636">28 | 读写分离有哪些坑？</a></h2>
<div class="outline-text-2" id="text-org7a311fc">
<p>
28 | 读写分离有哪些坑？
</p>
</div>
</div>

<div id="outline-container-org53fc24c" class="outline-2">
<h2 id="org53fc24c"><a href="https://time.geekbang.org/column/article/78134">29 | 如何判断一个数据库是不是出问题了？</a></h2>
<div class="outline-text-2" id="text-org53fc24c">
<p>
29 | 如何判断一个数据库是不是出问题了？
</p>
</div>
</div>

<div id="outline-container-org416bb7c" class="outline-2">
<h2 id="org416bb7c"><a href="https://time.geekbang.org/column/article/78427">30 | 答疑文章（二）：用动态的观点看加锁</a></h2>
<div class="outline-text-2" id="text-org416bb7c">
<p>
30 | 答疑文章（二）：用动态的观点看加锁
</p>
</div>
</div>

<div id="outline-container-orgc4ad5c3" class="outline-2">
<h2 id="orgc4ad5c3"><a href="https://time.geekbang.org/column/article/78658">31 | 误删数据后除了跑路，还能怎么办？</a></h2>
<div class="outline-text-2" id="text-orgc4ad5c3">
<p>
31 | 误删数据后除了跑路，还能怎么办？
</p>
</div>
</div>

<div id="outline-container-orgfda0186" class="outline-2">
<h2 id="orgfda0186"><a href="https://time.geekbang.org/column/article/79026">32 | 为什么还有kill不掉的语句？</a></h2>
<div class="outline-text-2" id="text-orgfda0186">
<p>
32 | 为什么还有kill不掉的语句？
</p>
</div>
</div>

<div id="outline-container-orgcbaf639" class="outline-2">
<h2 id="orgcbaf639"><a href="https://time.geekbang.org/column/article/79407">33 | 我查这么多数据，会不会把数据库内存打爆？</a></h2>
<div class="outline-text-2" id="text-orgcbaf639">
<p>
33 | 我查这么多数据，会不会把数据库内存打爆？
</p>
</div>
</div>

<div id="outline-container-orgc0c93f2" class="outline-2">
<h2 id="orgc0c93f2"><a href="https://time.geekbang.org/column/article/79700">34 | 到底可不可以使用join？</a></h2>
<div class="outline-text-2" id="text-orgc0c93f2">
<p>
34 | 到底可不可以使用join？
</p>
</div>
</div>

<div id="outline-container-orgb99ccd0" class="outline-2">
<h2 id="orgb99ccd0"><a href="https://time.geekbang.org/column/article/80147">35 | join语句怎么优化？</a></h2>
<div class="outline-text-2" id="text-orgb99ccd0">
<p>
35 | join语句怎么优化？
</p>
</div>
</div>

<div id="outline-container-orgb05fac0" class="outline-2">
<h2 id="orgb05fac0"><a href="https://time.geekbang.org/column/article/80449">36 | 为什么临时表可以重名？</a></h2>
<div class="outline-text-2" id="text-orgb05fac0">
<p>
36 | 为什么临时表可以重名？
</p>
</div>
</div>

<div id="outline-container-org11f74ad" class="outline-2">
<h2 id="org11f74ad"><a href="https://time.geekbang.org/column/article/80477">37 | 什么时候会使用内部临时表？</a></h2>
<div class="outline-text-2" id="text-org11f74ad">
<p>
37 | 什么时候会使用内部临时表？
</p>
</div>
</div>

<div id="outline-container-org765a11f" class="outline-2">
<h2 id="org765a11f"><a href="https://time.geekbang.org/column/article/80495">38 | 都说InnoDB好，那还要不要使用Memory引擎？</a></h2>
<div class="outline-text-2" id="text-org765a11f">
<p>
38 | 都说InnoDB好，那还要不要使用Memory引擎？
</p>
</div>
</div>

<div id="outline-container-org02620bf" class="outline-2">
<h2 id="org02620bf"><a href="https://time.geekbang.org/column/article/80531">39 | 自增主键为什么不是连续的？</a></h2>
<div class="outline-text-2" id="text-org02620bf">
<p>
39 | 自增主键为什么不是连续的？
</p>
</div>
</div>

<div id="outline-container-orgc3fb253" class="outline-2">
<h2 id="orgc3fb253"><a href="https://time.geekbang.org/column/article/80801">40 | insert语句的锁为什么这么多？</a></h2>
<div class="outline-text-2" id="text-orgc3fb253">
<p>
40 | insert语句的锁为什么这么多？
</p>
</div>
</div>

<div id="outline-container-org03ed445" class="outline-2">
<h2 id="org03ed445"><a href="https://time.geekbang.org/column/article/81925">41 | 怎么最快地复制一张表？</a></h2>
<div class="outline-text-2" id="text-org03ed445">
<p>
41 | 怎么最快地复制一张表？
</p>
</div>
</div>

<div id="outline-container-orgd4a2e5e" class="outline-2">
<h2 id="orgd4a2e5e"><a href="https://time.geekbang.org/column/article/82231">42 | grant之后要跟着flush privileges吗？</a></h2>
<div class="outline-text-2" id="text-orgd4a2e5e">
<p>
42 | grant之后要跟着flush privileges吗？
</p>
</div>
</div>

<div id="outline-container-org59d80cb" class="outline-2">
<h2 id="org59d80cb"><a href="https://time.geekbang.org/column/article/82560">43 | 要不要使用分区表？</a></h2>
<div class="outline-text-2" id="text-org59d80cb">
<p>
43 | 要不要使用分区表？
</p>
</div>
</div>

<div id="outline-container-org0647330" class="outline-2">
<h2 id="org0647330"><a href="https://time.geekbang.org/column/article/82865">44 | 答疑文章（三）：说一说这些好问题</a></h2>
<div class="outline-text-2" id="text-org0647330">
<p>
44 | 答疑文章（三）：说一说这些好问题
</p>
</div>
</div>

<div id="outline-container-org6f1b4bb" class="outline-2">
<h2 id="org6f1b4bb"><a href="https://time.geekbang.org/column/article/83183">45 | 自增id用完怎么办？</a></h2>
<div class="outline-text-2" id="text-org6f1b4bb">
<p>
45 | 自增id用完怎么办？
</p>
</div>
</div>

<div id="outline-container-org05322df" class="outline-2">
<h2 id="org05322df"><a href="https://time.geekbang.org/column/article/73370">直播回顾 | 林晓斌：我的 MySQL 心路历程</a></h2>
<div class="outline-text-2" id="text-org05322df">
<p>
直播回顾 | 林晓斌：我的 MySQL 心路历程
</p>
</div>
</div>

<div id="outline-container-org560747d" class="outline-2">
<h2 id="org560747d"><a href="https://time.geekbang.org/column/article/83556">结束语 | 点线网面，一起构建MySQL知识网络</a></h2>
<div class="outline-text-2" id="text-org560747d">
<p>
结束语 | 点线网面，一起构建MySQL知识网络
</p>
</div>
</div>
</div>
<div id="content"><!-- DISQUS BEGIN --><div id="disqus_thread"></div><script>/***  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/var disqus_config = function () {this.page.url = 'https://dirtysalt.github.io/html/geekbang-mysql-practice.html';this.page.identifier = 'geekbang-mysql-practice.html';};(function() {var d = document, s = d.createElement('script');s.src = 'https://dirlt.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><!-- DISQUS END --></div></body>
</html>
