<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CppCon 2017: Fedor Pikus “C++ atomics, from basic to advanced. What do they really do?”</title>
<meta name="author" content="dirtysalt" />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="/themes/favicon.ico" /><link rel="stylesheet" type="text/css" href="/themes/simple.css"/></head>
<body>
<div id="content" class="content">
<h1 class="title">CppCon 2017: Fedor Pikus “C++ atomics, from basic to advanced. What do they really do?”</h1>
<p>
<a href="https://youtu.be/ZQFzMfHIxng?t=1571">https://youtu.be/ZQFzMfHIxng?t=1571</a> atomic性能比CAS/mutex都要好，但是和spinlock相比在低冲突时候有优势，高冲突情况下面则没有什么优势。具体性能最好进行实测，而不是猜测。
</p>


<div id="org9abb7cb" class="figure">
<p><img src="../images/cpp-atomics-basic-to-advanced-0.jpg" alt="cpp-atomics-basic-to-advanced-0.jpg" />
</p>
</div>


<p>
<a href="https://youtu.be/ZQFzMfHIxng?t=1680">https://youtu.be/ZQFzMfHIxng?t=1680</a> 不是所有的atomic实现都是lock-free的，某些类型的atomic不支持lock-free. 可以通过 `is_lock_free`（运行期，准确） 和 `is_always_lock_free`（编译期，不准确） 来进行判断
</p>

<p>
<a href="https://youtu.be/ZQFzMfHIxng?t=2034">https://youtu.be/ZQFzMfHIxng?t=2034</a> compare_exchange_strong/weak 之间的区别 差别在于double-checking之后的lock, 使用的是timed lock. 如果超时的话，那么依然返回false
</p>

<p>
<a href="https://youtu.be/ZQFzMfHIxng?t=2926">https://youtu.be/ZQFzMfHIxng?t=2926</a> 几种memory barrier/order之间的差别和使用场景，relaxed, release(rel) ,acquire(acq), rel+acq, seq_cst
</p>


<div id="orgda0fb2e" class="figure">
<p><img src="../images/cpp-atomics-basic-to-advanced-1.jpg" alt="cpp-atomics-basic-to-advanced-1.jpg" />
</p>
</div>


<div id="orgd8764b9" class="figure">
<p><img src="../images/cpp-atomics-basic-to-advanced-2.jpg" alt="cpp-atomics-basic-to-advanced-2.jpg" />
</p>
</div>
</div>
<div id="content"><!-- DISQUS BEGIN --><div id="disqus_thread"></div><script>/***  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/var disqus_config = function () {this.page.url = 'https://dirtysalt.github.io/html/cpp-atomics-basic-to-advanced.html';this.page.identifier = 'cpp-atomics-basic-to-advanced.html';};(function() {var d = document, s = d.createElement('script');s.src = 'https://dirlt.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><!-- DISQUS END --></div></body>
</html>
