<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>iPhone + Charles(on Mac)的HTTP代理问题</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="dirtysalt" />
<link rel="shortcut icon" href="/themes/favicon.ico" /><link rel="stylesheet" type="text/css" href="/themes/simple.css"/></head>
<body>
<div id="content">
<h1 class="title">iPhone + Charles(on Mac)的HTTP代理问题</h1>
<p>
使用iphone + charles(on mac)发现一个奇怪的问题
</p>

<p>
我的iphone和charles(on mac)在同一个局域网下面：
</p>
<ul class="org-ul">
<li>iphone的IP是 192.168.1.154
</li>
<li>charles(on mac)的IP是 192.168.1.159
</li>
</ul>
<p>
然后charles打开的是22222端口，然后iphone上将局域网的代理设置成为192.168.1.159:22222
</p>

<p>
之前这么使用一直没有任何问题，但是突然有天就不work了。我怀疑是和我升级iOS版本或者是安装了某些软件有关系。
</p>

<p>
然后如果在mac上打开wireshark的话，可以看到下面这样的错误：
</p>


<div class="figure">
<p><img src="images/iphone-charles-http-proxy-issue-wireshark.png" alt="iphone-charles-http-proxy-issue-wireshark.png" />
</p>
</div>

<p>
感觉这两个设备(或者说IP)之间TCP传输存在某种状态错误(TCP ACKed unseen segment).
</p>

<p>
我猜测如果是这两个IP之间存在某种TCP状态错误的话，那么更换其中一个IP应该就OK。
之后我mac这台电脑的IP强制绑定在了192.168.1.160. 结果就好了。
</p>

<p>
但是上面那个问题还是没有解决。难道是路由器存储了这两个IP之间TCP的某种状态？
我也不知道是否有某种方式可以重置这两个设备(IP)之间的TCP状态。
</p>
</div>
</body>
</html>
