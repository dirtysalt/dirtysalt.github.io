<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nand2Tetris 计算机系统要素 硬件篇</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="dirtysalt" />
<link rel="shortcut icon" href="/themes/favicon.ico" /><link rel="stylesheet" type="text/css" href="/themes/simple.css"/></head>
<body>
<div id="content">
<h1 class="title">Nand2Tetris 计算机系统要素 硬件篇</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0175ed7">1. ALU</a></li>
<li><a href="#org39b0660">2. DFF and Bit</a></li>
<li><a href="#orge592a8d">3. Instruction</a></li>
<li><a href="#org8ac4abe">4. CPU</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0175ed7" class="outline-2">
<h2 id="org0175ed7"><span class="section-number-2">1</span> ALU</h2>
<div class="outline-text-2" id="text-1">
<p>
ALU设计图和计算逻辑。这里面每个input control bits都可以很简单地映射到具体的逻辑门上面，所以这个设计非常精巧。
</p>


<div class="figure">
<p><img src="images/nand2tetris-alu-0.png" alt="nand2tetris-alu-0.png" />
</p>
</div>


<div class="figure">
<p><img src="images/nand2tetris-alu-1.png" alt="nand2tetris-alu-1.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org39b0660" class="outline-2">
<h2 id="org39b0660"><span class="section-number-2">2</span> DFF and Bit</h2>
<div class="outline-text-2" id="text-2">
<p>
DFF(Data Flip Flop Gate)时序电路的基础，但是底层也是通过NAND门电路来实现的。时序门电路的特征是，状态的修改在下一个时钟周期才能体现在输出上。DFF可以用来存储数据，用来实现寄存器(Register)，内存(RAM)和程序计数器(PC)。寄存器可以认为是多个Bit组合起来的，而RAM则可以认为是多个Registers组合起来的但是有额外的地址输入，PC则可以认为是带有特殊功能的寄存器。
</p>


<div class="figure">
<p><img src="images/nand2tetris-dff.png" alt="nand2tetris-dff.png" />
</p>
</div>


<div class="figure">
<p><img src="images/nand2tetris-register.png" alt="nand2tetris-register.png" />
</p>
</div>

<p>
如何用NAND来实现DFF呢？可以看这篇文章 <a href="http://www.learningaboutelectronics.com/Articles/D-flip-flop-circuit-with-NAND-gates.php">http://www.learningaboutelectronics.com/Articles/D-flip-flop-circuit-with-NAND-gates.php</a> 大致思路是：使用两个NAND，一个NAND的output链接到另外一个NAND的input上。TODO: 这个需要在梳理一下过程。
</p>
</div>
</div>

<div id="outline-container-orge592a8d" class="outline-2">
<h2 id="orge592a8d"><span class="section-number-2">3</span> Instruction</h2>
<div class="outline-text-2" id="text-3">
<p>
机器指令和ALU设计同样精巧：机器指令分为A(地址指令),C(计算指令). A指令以0开头，C指令以1开头。难点主要在设计C指令上面
</p>

<p>
<img src="images/nand2tetris-inst-a.png" alt="nand2tetris-inst-a.png" /> <img src="images/nand2tetris-inst-c.png" alt="nand2tetris-inst-c.png" />
</p>

<p>
可以看到c1-c6是对应ALU的input control bits的，a则是涉及input(M寄存器 or A寄存器). d涉及输出寄存器，j设计PC寄存器。
</p>

<p>
<img src="images/nand2tetris-inst-cbits.png" alt="nand2tetris-inst-cbits.png" /> <img src="images/nand2tetris-inst-dbits.png" alt="nand2tetris-inst-dbits.png" /> <img src="images/nand2tetris-inst-jbits.png" alt="nand2tetris-inst-jbits.png" />
</p>
</div>
</div>

<div id="outline-container-org8ac4abe" class="outline-2">
<h2 id="org8ac4abe"><span class="section-number-2">4</span> CPU</h2>
<div class="outline-text-2" id="text-4">
<p>
这些指令编码是非常重要的，涉及到CPU的设计。如果编码每个部分不能很好地分解并且很好地映射到门电路上的话，那么在设计CPU逻辑电路的时候就会非常复杂。
</p>


<div class="figure">
<p><img src="images/nand2tetris-cpu-0.png" alt="nand2tetris-cpu-0.png" />
</p>
</div>


<div class="figure">
<p><img src="images/nand2tetris-cpu-1.png" alt="nand2tetris-cpu-1.png" />
</p>
</div>
</div>
</div>
</div>
</body>
</html>
