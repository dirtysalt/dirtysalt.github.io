<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LC 6155. 找出数组的第 K 大和</title>
<meta name="author" content="dirtysalt" />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="/themes/favicon.ico" /><link rel="stylesheet" type="text/css" href="/themes/simple.css"/></head>
<body>
<div id="content" class="content">
<h1 class="title">LC 6155. 找出数组的第 K 大和</h1>
<p>
<a href="https://leetcode.cn/problems/find-the-k-sum-of-an-array/">https://leetcode.cn/problems/find-the-k-sum-of-an-array/</a>
</p>

<p>
初看这题觉得这个数据量规模比较大，但是细看的话可以看到其中K最大值是2000, 所以必须从K入手。
</p>

<p>
然后就是可以转变一下这个问题：
</p>
<ul class="org-ul">
<li>假设我们有数组是 [1,2,3,4,5,-2,-3,-4,-5]</li>
<li>那么最大值肯定是 [1,2,3,4,5] = 15</li>
<li>假设就是选择从中减去 A=[1,2,3,4,5], 以及从中加上 B=[-2,-3,-4,-5]</li>
<li>而B其实可以变为从中减去  C=[2,3,4,5]</li>
<li>因为最后问题就变为，我们要从A+C中选择第K小的子序列之和，然后用最大值减去它。</li>
</ul>

<hr />

<p>
从一个数组中选择第K小的子序列之和，大致思路有点类似Dijkstra贪心算法，进行K轮迭代每轮都要进行节点扩展，然后使用堆维护最小值。一个简单的优化是，对于第S轮，我们只需要扩展K-S个节点，这样常数项大致可以减半，否则会出现超时的情况。
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-py-def-class">class</span> <span class="org-py-class-name">Solution</span>:
    <span class="org-py-def-class">def</span> <span class="org-function-name">kSum</span>(<span class="org-py-object-reference">self</span>, nums: List[<span class="org-py-builtins">int</span>], k: <span class="org-py-builtins">int</span>) -&gt; <span class="org-py-builtins">int</span>:
        <span class="org-keyword">print</span>(len(nums))
        <span class="org-py-variable-name">a</span> = [x <span class="org-keyword">for</span> x <span class="org-keyword">in</span> nums <span class="org-keyword">if</span> x &gt;= <span class="org-py-number">0</span>]
        <span class="org-py-variable-name">base</span> = <span class="org-py-builtins">sum</span>(a)
        <span class="org-py-variable-name">a</span> += [-x <span class="org-keyword">for</span> x <span class="org-keyword">in</span> nums <span class="org-keyword">if</span> x &lt; <span class="org-py-number">0</span>]
        a.sort()

        <span class="org-py-import-from">import</span> heapq
        <span class="org-py-variable-name">hp</span> = [(<span class="org-py-number">0</span>, -<span class="org-py-number">1</span>)]
        <span class="org-keyword">for</span> step <span class="org-keyword">in</span> <span class="org-py-builtins">range</span>(k - <span class="org-py-number">1</span>):
            <span class="org-py-variable-name">value</span>, <span class="org-py-variable-name">idx</span> = heapq.heappop(hp)
            <span class="org-keyword">for</span> i <span class="org-keyword">in</span> <span class="org-py-builtins">range</span>(k - step):
                <span class="org-py-variable-name">j</span> = idx + <span class="org-py-number">1</span> + i
                <span class="org-keyword">if</span> j &lt; <span class="org-py-builtins">len</span>(a):
                    heapq.heappush(hp, (value + a[j], j))
                <span class="org-keyword">else</span>:
                    <span class="org-keyword">break</span>
        <span class="org-py-variable-name">ans</span> = base - hp[<span class="org-py-number">0</span>][<span class="org-py-number">0</span>]
        <span class="org-keyword">return</span> ans
</pre>
</div>
</div>
<div id="content"><!-- DISQUS BEGIN --><div id="disqus_thread"></div><script>/***  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/var disqus_config = function () {this.page.url = 'https://dirtysalt.github.io/html/lc-6155-find-the-k-sum-of-an-array.html';this.page.identifier = 'lc-6155-find-the-k-sum-of-an-array.html';};(function() {var d = document, s = d.createElement('script');s.src = 'https://dirlt.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><!-- DISQUS END --></div></body>
</html>
