<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LC 6118. 最小差值平方和</title>
<meta name="author" content="dirtysalt" />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="/themes/favicon.ico" /><link rel="stylesheet" type="text/css" href="/themes/simple.css"/></head>
<body>
<div id="content" class="content">
<h1 class="title">LC 6118. 最小差值平方和</h1>
<p>
<a href="https://leetcode.cn/contest/biweekly-contest-82/problems/minimum-sum-of-squared-difference/">https://leetcode.cn/contest/biweekly-contest-82/problems/minimum-sum-of-squared-difference/</a>
</p>

<p>
这题可以抽象成为下面这个问题
</p>
<ul class="org-ul">
<li>假设我们有个数组A，里面每个数值都是正数</li>
<li>我们有K次机会去对任意元素进行-1操作</li>
<li>使得 `sum((x * x for x in A))` 结果最小</li>
</ul>

<p>
其实就是怎么快速地平摊K到这些元素上面，然后让每个元素都尽可能低接近。一个方法是使用heap, 每次选出最大的元素减一，减少最大和次大之间的差值。不过如果这个K很大，那么就会耗时比较长。
</p>

<p>
解决方法其实和 <a href="lc-6040-maximum-total-beauty-of-the-gardens.html">这题</a> 非常类似，思路就是找到一个参考点，以这个参考点进行计算。这个问题的参考点就是：最多能调整多少个元素。
</p>

<p>
下面是具体实现代码，里面有比较详细的注释。（这题我写了/调试了很长时间）
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-py-def-class">class</span> <span class="org-py-class-name">Solution</span>:
    <span class="org-py-def-class">def</span> <span class="org-function-name">minSumSquareDiff</span>(<span class="org-py-object-reference">self</span>, nums1: List[<span class="org-py-builtins">int</span>], nums2: List[<span class="org-py-builtins">int</span>], k1: <span class="org-py-builtins">int</span>, k2: <span class="org-py-builtins">int</span>) -&gt; <span class="org-py-builtins">int</span>:
        <span class="org-py-variable-name">n</span> = <span class="org-py-builtins">len</span>(nums1)
        <span class="org-py-variable-name">diff</span> = []
        <span class="org-keyword">for</span> i <span class="org-keyword">in</span> <span class="org-py-builtins">range</span>(n):
            diff.append(abs(nums1[i] - nums2[i]))

        <span class="org-comment"># &#22914;&#26524;&#21487;&#20197;&#20840;&#37096;&#35843;&#25972;&#23436;&#25104;</span>
        <span class="org-keyword">if</span> <span class="org-py-builtins">sum</span>(diff) &lt;= (k1 + k2):
            <span class="org-keyword">return</span> <span class="org-py-number">0</span>

        diff.sort(<span class="org-py-variable-name">reverse</span>=<span class="org-py-pseudo-keyword">True</span>)
        <span class="org-py-variable-name">tt</span> = <span class="org-py-number">0</span>
        <span class="org-py-variable-name">index</span> = <span class="org-py-number">0</span>
        <span class="org-py-variable-name">k</span> = k1 + k2
        <span class="org-comment"># &#22914;&#26524;&#21069;&#38754;index&#20010;&#20803;&#32032;&#20840;&#37096;&#19979;&#38477;&#21040;diff[index]&#30340;&#35805;&#65292;&#37027;&#20040;&#20250;&#36229;&#36807;k</span>
        <span class="org-comment"># &#35828;&#26126;&#25105;&#20204;&#26368;&#22810;&#35843;&#25972;&#21069;&#38754;index&#20010;&#20803;&#32032;</span>
        <span class="org-keyword">while</span> index &lt; n:
            <span class="org-keyword">if</span> (tt - (diff[index] * index)) &gt; k:
                <span class="org-keyword">break</span>
            <span class="org-py-variable-name">tt</span> += diff[index]
            <span class="org-py-variable-name">index</span> += <span class="org-py-number">1</span>

        <span class="org-comment"># &#21069;&#38754;index&#20010;&#20803;&#32032;&#35843;&#25972;&#30340;&#35805;&#65292;&#33267;&#23569;&#21487;&#20197;&#35843;&#25972;&#21040;</span>
        <span class="org-comment"># base = floor((tt - k) / index) = (tt - k + index - 1) // index</span>
        <span class="org-py-variable-name">base</span> = (tt - k + index - <span class="org-py-number">1</span>) // index
        <span class="org-keyword">for</span> i <span class="org-keyword">in</span> <span class="org-py-builtins">range</span>(index):
            <span class="org-py-variable-name">delta</span> = diff[i] - base
            <span class="org-py-variable-name">diff</span>[i] -= delta
            <span class="org-py-variable-name">k</span> -= delta
        <span class="org-keyword">for</span> i <span class="org-keyword">in</span> <span class="org-py-builtins">range</span>(index):
            <span class="org-keyword">if</span> k &gt; <span class="org-py-number">0</span>:
                <span class="org-py-variable-name">diff</span>[i] -= <span class="org-py-number">1</span>
                <span class="org-py-variable-name">k</span> -= <span class="org-py-number">1</span>

        <span class="org-py-variable-name">ans</span> = <span class="org-py-builtins">sum</span>((x * x <span class="org-keyword">for</span> x <span class="org-keyword">in</span> diff))
        <span class="org-keyword">return</span> ans
</pre>
</div>
</div>
<div id="content"><!-- DISQUS BEGIN --><div id="disqus_thread"></div><script>/***  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/var disqus_config = function () {this.page.url = 'https://dirtysalt.github.io/html/lc-6118-minimum-sum-of-squared-difference.html';this.page.identifier = 'lc-6118-minimum-sum-of-squared-difference.html';};(function() {var d = document, s = d.createElement('script');s.src = 'https://dirlt.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><!-- DISQUS END --></div></body>
</html>
