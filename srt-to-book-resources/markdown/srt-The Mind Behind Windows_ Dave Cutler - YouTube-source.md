# Chapter 1

Hey, I'm Dave.

Welcome to my shop.

I'm Dave Plummer, a retired software engineer for Microsoft going back to the MSDOS and Windows 95 days.

And today, I have the rare privilege of being joined by Dave Cutler

the chief architect and designer of what we know today as Windows.

As someone who's gone on to design three successful operating systems in a row from RSX-11 to VMS and then Windows

Dave has few, if any, peers in the industry.

And if he did, he'd have to work on it with them anyway as he's still actively coding as a senior technical fellow at Microsoft at the age of 81.

Dave was the recipient of the 2007 National Medal of Technology and Innovation at the White House

and in 2016 was honored as a fellow at the Computer History Museum.

Now, with all of his achievements and honors

you might think I'd be tempted to put him on a pedestal like digital royalty.

But I found him as approachable today as when he was just Dave C.

, my boss's boss's boss.

So please join me in welcoming Dave to the shop.

Let's get on with the interview.

Let's see, might as well start with something interesting.

There's a legend that when Windows NT first shipped

that a gift was sent to Sun by the team.

Uh, I don't know many details about it and nobody's willing to tell me very much about it.

Is there anything you're willing.

..

Well, we decided that when we sh- we- we

you know, we.

..

Scott McNealy was kind of mealy-mouthed, um

and there were some other people around that were a little bit that way too.

Another one was Lee Reiswig at IBM.

So we decided somebody, and I don't know who it was

it might have been, um, Kelly Wilson

w- who was the admin for the group

found these black cardboard coffins, and they were about two feet long.

So we decided that we would send Scott McNealy and Lee Reiswig a coffin and we would put a special message in it

and some guy found, um, these, um

like birthday cards that have.

..

they play a song.

Oh, yeah.

So he found a birthday card that played the death march

you know?

  And, um, so we sent one of these to Lee Reiswig and we sent one to Scott McNealy

and then Scott McNealy, at the time

um, Sun was running ads with their

um, with their.

..

They had a dog and the dog's name was Network

and Scott McNealy is reputed to have brought Network on the stage at one of his- I've heard of this

yeah.

.

..

talks with a fire hydrant and had the

the dog over and urinate on the fire hydrant and it said Microsoft on the fire hydrant.

So we put.

..

We got some fake dog doo and put in the box and we got.

..

I think we got a license, or

or a, a retail license or package for

I don't know whether it was SunOS or

or.

..

They had two, they had SunOS and

um, whatev- what the other one was.

And so we sent that.

We had.

..

Both of these we had hand-delivered so we know that they actually showed up.

Right.

Um, we had a third one, and I forget who we were gonna sell the third.

..

It might have been.

..

The third one might have been going to Larry Ellison or somebody that was.

..

else that was.

..

But that one never went off.

And I have, I have, um.

..

Did you go to the 21st anniversary?

Yep, I did.

I showed the video.

I showed- That must be where I've seen it

'cause I have it.

..

..

..

..

..

..

..

..

..

..

..

..

..

. but I couldn't find anything.

Yeah, I showed the video.

We, we decided.

..

And there's a little side story here too.

I hope we, we don't get distracted here and this goes on too long

because I like to tell stories.

Um, we did a video.

We decided we're gonna video this and we're gonna show it at the WIM on Friday.

So we got somebody to come in and video it.

And I, I did, uh, a couple of mock presentations for Lee Reiswig and

and, um, and Scott McNealy and we were gonna show these at.

..

on Friday at the WIM.

Well, this is the same time that the DOJ was suing Microsoft over DOS.

Right.

And on Tuesday, I told, um, Alton that we ha- we were.

..

Oh, in fact, what ha- what happened was

Alton was coming by as we were videoing this stuff.

And he, uh.

..

somebody's out in the hall, I think it was Dave Thompson said

he's kind of giggling and Alton wants to know why he's giggling and

and Thompson said, "Come and, come and look at what we're doing.

" So Alton came in and oh, he's like

he's, "Oh, this is the greatest thing in the world.

" He wants to sign it.

And ev- we.

..

everybody signed this, signed a card.

He wants to sign it.

Well, on.

..

This is on Tuesday.

On Wednesday, Bill comes out with a company-wide memo that says

"We're gonna be nice people from now on.

We want.

..

We're not gonna disparage our competition or anything.

" So Alton comes in on Thursday and tells me

"We can't show this at the WIM and we can't send these.

" And I said, "Geez, that's too bad

Jim, we already sent them.

"  So they made it out.

But, so anyway, for the 21st anniversary

I dug up the videotape- Okay.

.

..

and we had it put on a DVD and showed it at the 21st anniversary.

That's what you saw was- Okay.

.

..

one of those presentations.

Cool.

I'll have to see if I can find a copy of that somewhere.

This was a black, it was a black box and we had.

..

I think we delivered it with red roses.

Okay.

It was, it was, it was great.

 So was it always operating systems for you?

No urge to make a living in job control language or anything like that?

Well, what happened was, um, you know

I came back after doing this model and this model was never really very satisfying because

you know, the people at Scott Paper

you know, sort of didn't really care.

And this was.

..

Uh, this is a sort of a PR thing.

It's like DuPont's, you know, offering this service to help them and

you know, we talked to the plant manager and

you know, they'd sit in their chairs and

you know, "Mm.

" And we, we did a.

..

We asked them, uh, for a particular problem and they wanted to know what the run length should be to maximize

um-.

..

the, the, uh, yield because you have startup problems.

You have startup time and you have shutdown time where the ZARC weren't perfect

and the ZARC were never perfect anyway.

The ZARC had a big skin on them

which turned out to be a problem because they had to peel the skin off.

Right.

Um, so anyway, I decided that I was gonna go to work s- somewhere else and my boss at

um, in this math and stat group had left and went to Union Carbide.

So I queried Mark Union Carbide about whether or not they might have a job for

you know, I could get a job.

And I actually interviewed with them in.

..

I interviewed with them in, uh, New York City and they sent me off to Kokomo

Indiana to, to interview for a job in Kokomo

which was a, it was a plant that made Hastelloy

which was a, a steel used in submarines

which is very highly, uh, corrosion resistant.

And Kokomo, Indiana is.

..

there may be one town that was worse

which was Gary, Indiana, but Kokomo was pretty bad.

Anyway, about the same time, I interviewed at the engineering department at DuPont.

Engineering department was not an operating department, it was

uh, a department that built all their chemical plants.

Did.

..

or DuPont actually designed and built their own plants

all their own chemical plants because they didn't think that anybody would.

..

they didn't want to give away any of their secrets- Right.

.

..

for one thing and they didn't think anybody else could do what they could do.

Right.

So they had a group there that was called the Real-Time Systems Group

and they built, uh, some real-time systems for some of the operating plants.

So I thought that was a pretty good job and.

..

but their offer came back.

It was kind of weak, or I thought it was weak

and I accepted the job in Kokomo only to find out about a week later that the job with the engineering department was paying much more than I thought it was.

And so I sent all this stuff.

..

they sent me tickets and everything, and I sent it all back and said

"I'm not, uh, going to.

..

not taking your job.

" What a career decision that was.

I would ended up being a COBOL programmer and I probably still been there in Kokomo.

 Yeah, probably.

Um, so anyway, I went to the engineering department at this Real-Time Systems Group and

um, they had built some systems for

uh, the textile fiber plants.

Uh, there's one in Tennessee.

Well, they were all over the South.

And I can't remember exactly what any of the systems did.

But anyway, they're on.

..

the computers were Bunker-Ramo 340s.

Mm.

The Bunker-Ramo 340 was a 28-bit machine.

Um, it was a very interes- uh

very interesting machine.

Uh, anyway, I got, um, into that group t-.

..

and the first thing I did there was they wanted to build

um, automatic analysis of In- Instron tensile testing.

Instron is a machine that basically you pull things apart with.

Okay.

And they have a bunch of, uh

strain gauges that, that look at the what's going on with what you're pulling apart to see where the yield points are and everything

and they chart this all out.

And then somebody has to look at it and say

"Oh, yeah, this is the mo- the modulus was with the yield point

" and they had a bunch of other things

"What's the tensile strength and all that," so we're gonna automate all this.

So I, um, basically wrote the program that did that and.

..

or, well, I wrote the program that collected all the data.

And it was a real-time program and it ran

you know, I think we ran every millis- or every 100 milliseconds or something like that to get data.

100 milliseconds was fine for this stuff because you're pulling this apart at not anything that's a

uh, a really rapid speed.

Right.

It's sort of like this.

Um, and so I was in this group and I worked on that project and.

..

So again, I'm bored.

I.

..

there's nothing to do.

You know, I get to a point where.

..

well, it's the.

..

I'm not bored because of wha- the, the work stuff

uh, I'm bored because this is a engineering services department and they have to wait until somebody says

"We want you to do something.

" Right.

And then there's a whole bunch of stuff about proposing the project and what they're going to do.

Well, the same 1107 was right down the

the, uh, hall from me and they had.

..

they had a group of about three people that supported that.

Um, and so I went down and said

"Hey, um, do you guys need any help?

" And they said, "Yeah, we can get you to do something.

" So I started working on an Exec 2

which was the 1107 operating system at that time

which was a batch system.

Okay.

Um, but it was fast.

It was really fast.

We could run batch systems faster than.

..

I mean, really fast.

And it was a fast machine and then eventually it went to the 1108.

So that's where I really got into the operating system part and every night at

at five o'clock, we kick off the

the operators and we get the machine for two hours.

So in those two hours, we had to run all the experiments we cooked up for the day

all our test code and whatever.

Right.

And, um, of course everything was, you know

like, um.

..

debuggers, there's no debuggers.

You know, there's like.

..

there's switches on.

..

there's lots of switches on the 1107.

Right.

And, um, w-.

..

you know, there's a way we could halt instructions and things like that.

So it was kind of, uh, it was

it was very interesting, a lot of interesting concepts in that system

um, that were, that I sort of carried forward in

in, um, VMS.

Um, so I worked on that and then

um, the next thing I did was

um, the experimental station wanted to automate the analysis of all their Instron system stuff.

The other for- the other one was just for plants with the bunker remote.

Okay.

So we actually were gonna build a big computer system to do this and we ended up

this was, this was again back when

this is in a real-time systems group now because I was just loaned to the other group.

And so we end up with a dual PDP-10 system

sharing memory, and we had a PD8 prim- PDP8 front end for all the terminal input.

And then we ran, I think the wro- we ran analog lines in conduit for like 3

000 feet, a long distance.

A lot of noise, b- but a long distance.

And, um, in the dual PDP-10 we ran tops ten on one of them and then we ran another system that

that the group that I ran developed.

So they shared memory?

Shared memory, yeah.

But they run a different system?

Yeah.

Shared memory we had, I think we had 32K byte

K words, 32K words of shared memory and then I think each one of them had 16K of non-shared memory.

So we could dump data very fast between the two systems- Right.

.

..

directly and then we had, we had

uh, um, a dual interrupt system, or dual interrupt capability to interrupt back and forth.

So from there I went to Digital and s- of course I went to Digital to work on operating systems

so that's what I worked on at Digital.

How long were you at Digital before you started on RSX?

Well, uh, I immediately started on RSX 11C.

So that's my, one of my questions

didn't they not have people internal?

Why were they pulling external people in to start brand new operating systems?

Well, I was really hired to work on OS45.

Okay.

And at that time, OS45 is sort of in this embryonic state where it's

um, it's this, it's this pipe dream of Dave Stone who was a graduate of MIT and worked on M- and worked on Multics.

So the, the big thing about the 45

# Chapter 2

Yeah.

Shared memory we had, I think we had 32K byte

K words, 32K words of shared memory and then I think each one of them had 16K of non-shared memory.

So we could dump data very fast between the two systems- Right.

.

..

directly and then we had, we had

uh, um, a dual interrupt system, or dual interrupt capability to interrupt back and forth.

So from there I went to Digital and s- of course I went to Digital to work on operating systems

so that's what I worked on at Digital.

How long were you at Digital before you started on RSX?

Well, uh, I immediately started on RSX 11C.

So that's my, one of my questions

didn't they not have people internal?

Why were they pulling external people in to start brand new operating systems?

Well, I was really hired to work on OS45.

Okay.

And at that time, OS45 is sort of in this embryonic state where it's

um, it's this, it's this pipe dream of Dave Stone who was a graduate of MIT and worked on M- and worked on Multics.

So the, the big thing about the 45

the PDP-10 was like a microsecond machine.

The 1145 was a 300 nanosecond machine and he had great.

..

And the, the PDP-10 was sold as a time-sharing system.

Um, you know, some of the time-sharing service bureaus had PDP-10s.

Right.

All the colleges had PDP-10s.

People loved the PDP-10.

So he had great visions that we're gonna build this system

or a look-a-like system on this new computer called PP11 because it was three times as fast.

Well, he had one thing that he didn't really think about a bit enough and it's the biggest single thing that obsoletes architectures is the number of address bits.

16 bits just wasn't enough.

Right.

So in the 11th, the OS45 was gonna be

um, at that time was, they were gonna have

we were gonna have a subsystem as the real-time subsystem and the batch subsystem and the time-sharing subsystem.

You know, it sort of sounded like

um, some of the IBM 360 systems at the time.

You know, they, IBM had a dozen operating systems probably for the 360.

Um, so we're working on all the concepts and we're building the t- we're hiring people for the team and this project has been over in IPG which is Industrial Project Group for like a couple of years trying to get the PDP11 to just do terminal emulation.

This is, you know, that's all, just core only

terminal, and they're working on this thing called RSX 11C and their main architect is this guy from Foxborough.

Uh, do you know who Foxborough is?

Fox- Don't the Patriots play there?

Yeah.

Uh, actually Foxborough was in Foxborough and it was a process control company.

Okay.

So they produced custom process control systems.

Um, and so they hired this guy from there who was absolutely terrible.

Uh, he may have been really okay with the

you know, the kind of process control hardware that they were sequencing

sequencers or whatever, but he was really trying to build something that was an operating system that ran

uh, multiple tasks and context switched and all that stuff and this had

this is only like.

..

How much code is this?

I'd be surprised if it was more than 10

000 lines of code.

So it was small.

Right.

It was not very big and they'd been working on this two or three years and IPG was desperate so they said

"Geez, you know, would you go work on this in your spare time?

" And I said, "Well, sure.

" So I ended up working on that

um, and we eventually did release that.

I wo- I think I worked on that about a year and it was terrible.

 It was horri- I mean, looking

you know, I, at the time.

..

If you took today's c- uh, customers and tried to superimpose them on the products of that time they'd all walk away.

Right.

They'd just walk away.

I mean, RSX 11C was probably capable of controlling your doorbell

right?

But not much more.

Right.

And I don't know, you know, I don't know how many they sold or what they did.

I, you know, I did another little offshoot of that that actually brought the disc into the picture but it never was anything that-.

..

you know, had a command capability or anything like that.

You know, you just basically, you had a set of sources that you customized to build whatever your application was.

Right.

Um, whether it was like, may- probably mainly reading switches somewhere and maybe reading switches and then output the switches

um, but not much more than that.

And what.

..

It was.

..

What kind of hardware was that on?

PDP- PDP-11.

Okay.

Eleven.

So when you started VMS, was it always self-hosted on VAX prototype hardware or did its

the code start on a PDP-11 platform or.

..

Well, it turned out actually that VAX

VAX had a PDP-11 mode.

Right.

And we developed something that was very similar to Wow64

um, where you could run PDP-11 programs on VAX.

So, you know, that side of the

the operating system, all the utilities and all that

we took from RSX 11M right out of the distribution and ran them.

But the development on the system, um

we had a, um, a group that produced a

an emulator, a hardware emulator.

And, um, it was w- it was microcoded.

It was a microcoded hardware emulator and, you know

I can't remember how.

..

It was not really that slow.

I mean, it wasn't fast but it wasn't slow either.

So the very embryonic work, um, you know

scheduling and memory management and that sort of stuff went on

on that.

And we only had one of those, on that one machine.

Uh, and, of course all of the s- we.

..

All of the tools and everything ran on RSX 11M

which was 16 bits.

We were building, we were building stuff

uh, on the 16.

..

Well, some of it was.

..

Most of it was on the 16-bit system.

So the assembler ran on the 16-bit system producing 32-bit relo- relocodable code.

Okay.

The linker, however, ran on PDP-10.

The linker was written in BLISS.

Hmm.

You know what BLISS is?

I've heard of it, but never, never up close.

BLISS was a language that was invented by CMU and its claim to fame was it was gotoless

and it never really caught on.

It was very error prone.

Um, everything was an L value and you had a specific operator to dereference it.

And everything had to be explicitly dereferenced.

Like if you.

..

On.

..

I- if you're looking at C, you look at a statement that says A=B+C

well you have an implicit dereference of B and C and you have a implicit reference of A on the left-hand side which is a store through whatever the value of A is

which is its address.

On, in BLISS you had to have a dot in front of all those.

So it was a very, um, very strict dichotomy between what is the L value and what is the R value.

Right.

Very error prone.

It was a dot.

And of course without a goto, um

all your logic got kind of inverted.

Everything is a, a while so that you can leave.

 You know, you can- Right.

.

..

you can exit the while, it's somewhere in the middle.

So anyway, we.

..

There.

..

They had developed this language and there was a compiler on the PDP-10 and we did a cross compiler on the PDP-10 for VAX so that we could do the linker.

The debugger was always also written in BLISS

um, on the PDP-10.

But all the rest of the development occurred on the 11

i- on R- RSX 11M on 1170, by the way.

And we ran.

..

We could run, um, I would say a dozen and a half users on RSX 1111 on 1170.

Um, it's amazing what we could do in S- in 64 KB of memory.

Right.

I mean, amazing.

We had compilers, linkers, I mean, all that stuff.

And today, you know, you, you

you link something that says hello world, it's a megabyte

you know.

It's a, it's a, uh, it's probably not a megabyte but it's close to a megabyte.

It's si- huge.

Um, so anyway, that's how th- that all got bootstrapped and then eventually we got one of the early prototypes.

I think it was Proto Six.

And we decided, and this is the same thing we did in

in NT and Windows was that we're gonna eat our own dog food.

And as soon as we got to the point where we could run

we could actually run reliably enough on Proto Six.

..

Actually it was Proto Three, it's Proto Three.

We could run on Proto Three, then we ju- we had w- our offices and

and the machine is like, it's like our offices are here and the machine is sitting over there.

And if the machine bug checks, you know

about three or four of us get up

walk over to the machine, sit there in the debugger for a little while and figure out what it is

reboot the system, go back to our office

fix the bug, update the system, reboot and then go on.

Right.

And that's what we did.

That's the way- Does having everybody self-hosted on the same system kinda instill a quality thing because you're bringing down everybody if you bring down anybody pretty much?

Well, there was only one, there was only one piece of hardware.

Right.

Period.

So there was no way that you're gonna ho- you can't.

..

They can do.

..

They could still run assemblies and things like that on RSX 11M.

They could still develop the linker on the PDP-10

all right?

We just couldn't develop the op- the things that ran in the operating system

all right?

But we brought all.

..

I mean, since we.

..

The, the, this layer which was equivalent to

uh-.

..

WOW64 was called the AME.

It was the Application Migration Executive, much thinner layer than

than, um, WOW64.

It was much thinner.

I mean, it basically looked like a PDP-11.

Right.

And, um, you know, it loaded up the programs and started them and they ran and the file system was compatible.

It was files.

..

We took the R611M file system to VMS

which is called Files-11, and we just re-implemented it.

I don't think we really did, um

we didn't do anything that was, you know

an enhancement really.

It was just a re-implementation of the same thing.

Um, so the file system worked.

We didn't have to do anything special for that

you know, the filenames were the same.

Uh, in those days there was one character set

it was ASCII period, there's no  other character sets.

Um, there was no graphics, so we didn't have to worry about graphics.

Um, you know, basically worry about disc drivers

um, tape drivers, um, terminal drivers.

Um, we had network stuff, we were

we were, uh, implementing DDCMP which was

um, digital's micro- or digital's protocol.

Okay.

It preceded.

..

Well, I- it didn't actually precede TCPIP 'cause TCPIP was an outgrowth of DARPA and

uh, that actually occurred before DDCMP.

Uh, but we were also developing SNA and

um, BISync which was IBM's remote terminal protocol for 2780s terminals.

Okay.

I've heard that VMS shipped with zero bugs.

Does that.

..

How much of that is- On the day

on the day we shipped VMS there were zero known bugs.

That didn't mean there were no n- there were no bugs 'cause there were bugs

but, but there's a big difference between shipping

uh, a system with 20,000 known bugs that

that some produc- prog- program manager said, "Well

you know, we've looked at this and it doesn't meet the bar.

" That used to just drive me just batty.

Right.

Uh, I wanted every bug fixed.

Every bug.

And it, you know, it'd get so depressing as we're going through the

the, um, Windows relea- the NT releases where we have this war room every morning

you know, and you fix, you fix

uh, 200 bugs in a day.

Next day there's 200 new bugs, every single day for months

right?

But, but anyway, I mean, it

there.

..

We made a real effort to fix every bug that we knew about before we said

"Okay, we'll ship this.

" And there wa- I know there was a last minute bug

we had a race condition in a, a channel hol- or hand-off that occurred in one of the disc drivers

um, that we fixed, like, in the 11th hour.

But there were zero known bugs at the time we shipped.

I mean- But you were schedule-driven as opposed to.

..

You didn't have to make Christmas for DEC obviously

or that kind of thing?

No, but th- the thing that we were.

..

The thing that, that happened there, um

I guess y- you could really say we were schedule-driven because

you know, the success of the company was selling hardware.

It wasn't selling VMS.

Right.

And we couldn't sell the hardware without the operating system to run on it.

So, as soon as manufacturing is ready to start pumping these systems out

now you got inventory, you got customers who bought machines

you want to have the, the software to run on them.

Right.

And, and in fact we shipped, we shipped some systems to customers that were

um, early.

..

Sort of like the early adopter program.

We had, we had two customers that we actually gave early VAX hardware to and.

..

To help us develop things.

One was Schlumberger.

Schlumberger was putting VAXes in, in semi-sec- semi-tractor trailer trucks and carting them around the US taking data on oil well.

Oh, really?

All right?

They were.

..

You know, they'd send a, uh, instrument bundle down the

the, the, um, casing and I don't know

they set off explosions or what they did and then get all that data.

They collect it all on VAX and then process it.

So Schlumberger was one and the other one was

um, the, um.

..

Related to the Naval.

It wasn't the Naval Academy but it was some other Naval organization and we had

we had two software support specialists at each one of those customers and they would sort of be the people that

that would take the, the updates.

You know, we update the system not as often as we update the systems at Microsoft when we're doing development

which is basically every day.

But, you know, we'd, we'd get to a point.

..

We, we operated what we called base levels which was.

..

We, when we planned the, at the beginning

we set out what the base levels were and this is the base level of functionality that we try to reach by a certain point and we wouldn't

we wouldn't go on to other stuff until we reached that point.

So it was various base levels.

So as these came out, um, you know

people would get upgraded and they only got the functionality what was in the base level so.

# Chapter 3

They collect it all on VAX and then process it.

So Schlumberger was one and the other one was

um, the, um.

..

Related to the Naval.

It wasn't the Naval Academy but it was some other Naval organization and we had

we had two software support specialists at each one of those customers and they would sort of be the people that

that would take the, the updates.

You know, we update the system not as often as we update the systems at Microsoft when we're doing development

which is basically every day.

But, you know, we'd, we'd get to a point.

..

We, we operated what we called base levels which was.

..

We, when we planned the, at the beginning

we set out what the base levels were and this is the base level of functionality that we try to reach by a certain point and we wouldn't

we wouldn't go on to other stuff until we reached that point.

So it was various base levels.

So as these came out, um, you know

people would get upgraded and they only got the functionality what was in the base level so.

..

And customers generally were at the other end of that where they get much more capability.

But, um, you know, there's things.

..

Uh, I don't know.

We probably ran for a year where the system was actually usable.

You know, we could.

..

We did the development on that system.

Right.

And it was reliable enough that it didn't crash that often.

Um, uh, as far as stress on it

we didn't really probably stress it that badly because

you know, there's.

..

..

. I don't know, 24 to 30 people sitting around

you know, plinking on keys.

Right.

Now we had, we had better terminals then.

We had, we had, uh, CRT terminals with keyboards that didn't require a pound of force to for

to  to push down the keys.

You ever push down a key on a JSR-33?

Yeah.

.

The round posts.

There weren't, there weren't any speed typers in those days.

 No.

Um, after VMS you worked for a bit on an embedded system or a real time control system of some kind?

Uh.

..

After, actually, after VMS I worked on the PL/I compiler.

Yeah, how did you get into compilers and why

and how do you pick up compilers as a.

..

Well, you know, there's always this interest in this magic that compilers did and I always wanted to do a compiler or find out about a compiler and at the end of the VMS project

release one, I decided that there was a project that

that, um, one of the commercial divisions of Digital wanted to have a PL/I compiler and so they were looking for somebody to develop the compiler and

and all the language groups didn't want anything to do with this at all.

They were, they were Fortran and COBOL

um, not anything else.

The basic stuff was all over on the PDP-11.

So, we bought a front end from a co- a company

um, from Boston and the guy, I can't remember what the name of the company was

but the guy's name was Bob Fiberhouse, and it was a PL/I subset front end and so we bought that and then we had to develop the back end

um, and I developed a code generator for the

for the back end and we- What did the front end compile to- An intermediate- .

..

or pre-process to, I guess?

.

..

an intermediate language.

Okay.

Um, in fact all the compilers do that these days.

Uh, you know, there's several phases to the compiler and each one does

you know, its job and moves on.

Um, but we ended up, we ended up doing

the back end we did on VAX and the front end work that we did

we did at MIT on Multics.

And we tried to work from Tewksbury, Massachusetts remotely with Multics and it was a nonstarter.

You could not run half duplex.

It could not.

..

It was so slow.

So we ended up, we, we had this tape shuttle and we'd do the stuff that we needed to do to the front end on the system at MIT and then put it all up on tape

bring the tape up to Tewksbury, which was maybe ten miles away

read the tape, and then we'd have

we'd have input to fa- uh, to feed into our

our back end which knew what the format of all this stuff and the outcome of that would be object code which then we could run through the linker to produce programs.

So that's how we developed PL/I.

Um, so we also got.

..

We did a C compiler also with the same back end.

It was a very different back end.

It wasn't, um, it was not.

..

I, I, uh, you know, elegant .

It really wasn't elegant.

Uh, a lot of it was, um

done in a, uh, a language called

we called TBL and TBL just stood for table

and it was basically a byte interpreter because the

the compiler is so full of, um

function calls.

I mean like, thou- I mean the density is so high that you're run- you run this interpreter and the interpreter has a byte code with implied operands.

So, you know, if you're gonna generate.

..

If you, you know what the input for the

the front end is you have, you have these records that are operands and all kinds of different records and you can think of each one of these byte codes as being a processor for that kind of particular type of operand

or maybe that record, or maybe it's some sub-part of that

some variable reference, or building a symbol table thing or something.

So, a lot of it was written in that and then of course we also did an optimizer which I was very interested in optimized code because

uh, the early PDP-11 compilers were, were threaded code.

Uh, and threaded code was like, um

like byte codes only it was 16 bits rather than 8 bit byte codes and that's basically what it was.

Okay.

And that's what they compiled to and then we had these interpreters that ran.

So, the, the original Fortran compiler, um

was byte, byte.

..

Was, uh, threaded code.

So anyway, I got interested in the optimization and what

what really was drove me about the optimization was how good a code that the 1108 could put out.

The Fortran compiler for the 1108 was written by CSC

Computer Sciences Corporation, and it was fast and it was just unbelievably good code.

Of course, it re- might not look so good now but in those days it looked really good and it ran really well.

So I was very interested in optimization.

Spent a lot of time on optimization and a lot of time on register allocation.

Um, and then, and then I left.

..

I decided.

..

Actually one of the guys that I worked with said there was a guy in California that worked for Lawrence Livermore that had worked on the Shiva Nova project.

Shiva Nova is laser fusion.

And this is, um, we're talking circa 1980.

A while ago, yeah.

They're still working on that.

 Yeah.

20 years away, still.

Yeah.

It's like.

..

And so he, he had been one of the people that was instrumental in

in convincing the people at Livermore that they had to have a special language developed to write the software to control the lasers for the Shiva Nova project.

It was called Praxis.

So, like a lot of these things in the government

you know, he got, they got through this thing and got the compiler and this is

it, this is pub- or it's pub- or it's

uh, funded by the, the, um

government, so it's public.

So he decides he's gonna start a, a compiler company.

So I got talked into joining this company with him and four

there was four of us from Digital and two from his company

and, um, so I was gonna leave.

I was already leaving.

And Gordon Bell is up in arms, he doesn't want me to leave

so he's, you know, he says, "Well

you know, what can we get, do to get you to stay?

" But I said, "I don't know," but I said

"I gotta get away from here.

There's too much bureaucracy here.

" This is in Massachusetts.

And it had, the Digital had grown from a company that was

like, just a, it was just a

um, such a great place to work.

It was engineers building projects for, building products for people that were engineers and really liked them.

Right.

And into, uh, an atmosphere of, of

you know, all these business people coming in and all these business plans and no longer.

..

Ken Olsen's thing was, do what's right for the customer

and it was never, it was, kind of became

you know, do what's right for, to make the most money or whatever.

And we were very ill-prepared for all of the organization and the people we hired and everything

so it got very hard to work.

So I said, "Well, I have to be somewhere remote.

" He said, "Oh, we'll put you anywhere.

We'll put you anywhere you wanna go.

" And I said, "Well, no, I'm gonna do this.

" Well, this fell apart.

Um, we all put in $2,500 and this guy that was gonna be the president had a wife that would

would, had a calligraphy company and he contracted her to do our business cards.

He, he blew our whole $7,500.

 Just blew it all away.

And I was so, I was so mad about that.

I said, "I'm, I just, that's it.

I'm not doing this.

" Right.

Probably a bad sign.

So, so Gordon comes back and says

um, you know, "What do you wanna do?

" And I said, "Well, I wanna move somewhere else.

" He says, "Well, you can go anywhere you wanna go.

" He said, "The only thing that's, that I have as a restriction is I want you to go somewhere that's close to a university.

" So I said, "Well, I have some preconceived notions about where I don't wanna go.

So I don't wanna go to the Southeast.

I don't wanna go anywhere in, like

in Washington DC or any of that area.

I don't really wanna go to Mid-America, I grew up there.

Um, probably not Phoenix, maybe the Southwest not

maybe the West Coast.

" So off we go to the West Coast to look at potential places and we go.

..

'Course we have, we have, uh, a whole group of people now from Digital have to jump into this.

It, I can't just go with my group of people and we pick out a site.

Right.

We have to have the real estate people come with us

right?

'Cause they gotta get the best deal.

And so we go to Sacramento.

That's a nonstarter.

Um, we didn't go to Santa Rosa.

They wanted us to go to Santa Rosa

but Santa Rosa would've been a nonstarter too.

You know, that's sort of north of San Francisco and at that time I don't think there

I don't know how much is there now.

I think there is some stuff there, but.

..

We did go to Portland.

I really liked Portland.

And we went to Seattle and I remember we were

we were flying into Seattle.

Have you ever flown into Ireland?

Nope.

Ireland, you can't believe how many shades of green there are.

I mean, it's, Ireland you just fly in there and it's just all these different shades of green.

It's just beautiful.

So we're flying into Seattle and it's just

I mean, it just, and it's raining

but it looks really nice and so I

geez, this is a great place.

So we decide we're gonna start an engineering organization and University of Washington is next door.

So we're gonna start an engineering organization there and what we

what we're gonna have as a charter is to develop

um, chip-based system software.

And this was at a time where, where

um, VLSI was just getting started, uh

at a large scale and, and Digital had great visions that they're gonna build one-chip faxes and

um, we really needed, we needed a set of s- uh

software to run on these really cheap one-chip faxes that we're gonna populate everywhere.

So we went to see, went to

ended up in Bellevue, uh, with about

um, 12 people and we're gonna produce a

basically a real-time system for that.

And it was called Vaxilon and it was

it was, it was not a very good system

but it was, it was a f- one of the first systems where we tried out a lot of things that we hadn't tried before

um, because everybody thought they were great things to do

like, um, drivers and user mode.

..

. um, everything being message-oriented, everything's messages.

And we would, when you send messages

you un-map it in the sender and when the receiver receives it

they map, we map it in their receiver.

And it was the first system that we did was multi-threaded.

So it was multi-threaded and the other thing

it was, it was multiprocessor.

Okay.

So this is the first multiprocessor, multi-threaded system.

And, um, I had some bad experience

uh, with customers with some of the features of RS611M and

and VMS.

We had, we had.

..

In, in Windows we had things called

w- they, the names changed, they're called APCs

um, which were asynchronous, uh, A- AS- APCs

A- Asynchronous, um, Procedure Call.

APCs.

Asynchronous p- procedure calls.

In RS611M and DMS they were called ASTs

they were Asynchronous System Calls.

So they were like interrupts.

Well, interrupts in user mode does not work.

People just don't- Right.

.

..

don't get that.

So, um, we decided that we, we would

should control things much better in the system.

So we had a lot of user mode level scheduler controls.

You could disable context switching and all sorts of stuff.

And, and stuff like, we'll make it so that we can guarantee that you won't run two threads in your program at once.

Which, and, you know, right after we did it

the first thing that people say is, "Why didn't you allow this?

" Right?

It's like.

..

Anyway, um, we did ship that system and we had a few customers.

One of the customers we had was, uh

a company called Cadex.

You remember Cadex?

No.

Cadex was an offshoot of, um, the company that made Pagemaker.

Aldus?

Aldus?

Aldus.

It was, it was an offshoot of Aldus.

And they were building some kind of a document control system

and they were a customer and so we worked with them.

Um, anyway, that's how, that's the system and it.

# Chapter 4

You could disable context switching and all sorts of stuff.

And, and stuff like, we'll make it so that we can guarantee that you won't run two threads in your program at once.

Which, and, you know, right after we did it

the first thing that people say is, "Why didn't you allow this?

" Right?

It's like.

..

Anyway, um, we did ship that system and we had a few customers.

One of the customers we had was, uh

a company called Cadex.

You remember Cadex?

No.

Cadex was an offshoot of, um, the company that made Pagemaker.

Aldus?

Aldus?

Aldus.

It was, it was an offshoot of Aldus.

And they were building some kind of a document control system

and they were a customer and so we worked with them.

Um, anyway, that's how, that's the system and it.

..

That.

..

Well, partway through that system, um, we look around the company and there aren't any single chip VAXes.

None.

So we say, "Well, geez, we need a small VAX.

A small, cheap VAX.

" So we started, the company started a project called MicroVAX

and we decided we'd build one.

So we built the first MicroVAX at DEC West.

DEC West was the name of the place.

And my contribution to that was I wrote all the microcode for the whole thing.

Really?

Um, which was a, a real experience.

And I don't have a copy of it.

I'm just, just.

..

And I'm really upset that I don't have a copy of the microcode

but, um, I think it would've been interesting to go back and look at it.

Yeah.

It was, um, it was 4K by 30 bits.

The microword was 30 bits wide.

Um, we had, when they were, um.

..

I'm sorry, it was 40 bits wide.

Uh, it was 4K by 40 and it was

um, eight, I'm sorry, five eight-bit PROMs were the

with the.

..

That was the microstore.

Okay.

Um, so we, we built MicroVAX 1.

0 and shipped that, um, and then shortly thereafter

we did come out with this, uh

one-ship VAX which was called MicroVAX 2.

0.

And so, anyway, that was the end of that story.

Sort of a naive question on that.

When you've got these old machines with these huge machine words

you know, if you think of the Huffman encoding of instructions

there's gonna be instructions that are tiny that don't need anywhere near 40 bits.

No, but, but the 40 bits is the micromachine.

It's not the instruction set.

Oh, okay.

The instruction set is VAX.

So what users deal with is, and what programmers deal with is

they think it's a VAX.

It is a VAX.

In fact, all the VAXes were microcoded.

None of 'em were, um.

..

In fact, none of the machines today are really hardcoded or hardwired except su- the ARM processors are hardwired and

um, the system.

..

The RISC-V ones are too.

Okay.

And there, there's probably other, you know

ones that we don't even know about.

The Army has something somewhere, what, whatever.

But all the machines were microcoded and the microcode

like, the microcode on the 780 is like 99 bits wide or 100 bits wide.

It's very wide.

And so having a wide microinstruction, um

k- uh, is so that you don't have to do any decoding of vertically encoded fields in the microword.

You can just take the bits right out and jam it into the hardware.

You don't have to run it through any kind of a

a ROM or anything that, that, you know

actually takes it from its value.

Say it's, it's zero to seven, that would be seven different

or that's eight different bit patterns.

But the bit patterns are not, you know

four bits.

The bit patterns are eight bits.

Right.

All right?

So it's gonna take those f- those, those bits and cry out.

So the wider, uh, microinstructions allow for more parallelism and there's more bits to tweak hardware in parallel.

Okay.

So before we, uh, get to Microsoft

there was one thing I wanted to ask you about DEC and that was.

..

I may have the story wrong, but it sounds like before you decided to either move to DEC West or move to Microsoft

you basically shopped yourself back to your own employer to say

"What am I worth on the market?

" Is that.

..

..

. a summary of how it went?

Well,  actually there was an in- a l- there was a little interlude between a couple of the things there that I kinda skipped over and that was

the movement at DEC West.

Okay.

The first thing was really, um, it wasn't the compiler company.

There was another deal and it was, I got to be really good friends with the program manager for the

the VAX 750, and he went to work for

um.

..

He went to work for Intel in Portland and he worked on the 432 project.

Don't know what that is.

The 432 was Intel's super duper computer, uh

arch- uh, processor architecture.

You should go, you should wiki this.

This is before the i860, their previous failed attempt- This is before the i- this is before the i860 and he worked on that and he

he tried to get me to go to Intel and I said

"Sure, I'll come out and interview.

" So I went out and interviewed in Portland and I would've been working in a group there that was not the 432 group

but it was a group that, that

um, I think they had a system called RMX-16 which was w- this was Intel's little realtime system for- Okay.

.

..

the 286, I think.

And, uh, so I interviewed and, and they're all favorable and

and they wanna make me a job offer and

um, at, in the 11th hour they come back and they say

"We can't make you a job offer be- unless you tell Gordon Bell that

that you're looking for a job with, and that you've interviewed at Intel because we have a good relationship with Intel.

" And I said, "Sure, that's no problem.

" So I pick up the phone and this is

I'm in, I'm in, uh, Nashville.

Uh, not Nashville.

Nashua, New Hampshire.

Uh, it's Pitt Brick Road.

I pick up the phone and I call Gordon.

So I go, "Gordon, um, you know

I've been interviewing at Intel and they told me that I've gotta let you know that

that they wanna offer me a job and I just wanna let you know about that.

" And Gordon says, "Oh yeah, well what's

what's the deal?

" And I said, "Well, you know

I'm not really looking for a job.

I'd just like to know what I'm worth.

I'd like to have them make me an offer.

" And Gordon says, "Oh, okay.

That sounds sensible.

" I hang up.

Literally 15 minutes later I get this call from Larry Portner.

Larry Portner's the VP of software engineering at Digital and he says

"Gordon and I would like to have lunch with you today.

"  And I said, "Really?

" And he says, "Yeah.

How about lunch, you know, in, in just Nashua in an hour?

"  And I said, "Okay.

" So here comes Larry, here comes Gordon for lunch and they wanna know

you know, what's going on.

I said, "You know, all I wanna know is what I'm worth.

" And they say, "Well, jeez.

You know, you should've said something to us.

" I said, "Well, you know," I said

"we did VAX and, you know, we really

that VAX was really a, the VMS was really

I worked, I worked seven days a week

10 hours a day.

" I said, "We got thrilled through that.

You know, across the wall comes, like

10,000 shares of stock.

" And I said, "You know, that just didn't seem like a very big reward for all that effort and

you know, VAX is just this tremendous success and the company's riding the waves.

" "Oh, well, jeez, you know, you're probably right.

We probably didn't do very well there.

We'll have to do something, but you know

we really don't want you to take this offer from

or get this offer from them.

" Well, it turned out that they, they actually did cough up some more stock and I didn't want

I didn't wanna work with these guys anyway.

Uh, and I didn't think Intel was all that sharp and

uh, that sort of blew over.

But part of that blowing over was the movement at DEC West in Bellevue.

Um, the first go around was the go around where

you know, I'm gonna leave the company and then in the 11th hour I decide I'm not leaving the company

but this is after Gordon had said, "We'll

you know, we'll send you anywhere.

" And this time I said, "Well, you know

I don't wanna go work for Intel, but I really do wanna get out of here.

" So that's when we came out and looked around.

And then after a while at DEC West you were but a Denny's meal away from Microsoft

if I understand.

I was what?

You were a Denny's meal away from Microsoft with Steve B.

? .

D- Steve Fleecetis.

 Okay.

Well, you know, we're, we, I was leaving.

I, well, there's a piece missing here and that is the Prism Project.

Um, Digital in the mid-eighty, in mid-'80s decided to start a.

..

Well, we hi- we started several projects to produce RISC architectures because we had

um, everybody was building RISC machines and th- one of the reasons they were building RISC machines was because they're easy to build at that time.

You know, I, um, AMD was building these 2901 bit slice chips and they're four bits wide and they had all the ALU control and all that stuff and you just gang them together and presto esto you have a processor

right?

And now all you gotta do is design your instruction set and how you're gonna feed this thing.

So there were a dozen, at least

RISC machines-And they were all, they all claimed to have a two

or, or.

..

RISC in general claimed to have a 2X

um, performance im-, um, advantage over VAX because VAX was a CISC machine and you had to have all this decoding and

and it was, really it was a byte serial decode.

Uh, VAX was overly complicated, um, overly complicated.

Uh, for the.

..

The reason it was overly complicated is because we.

..

Memory was so expensive when we did VAX that we wanted to encode and PDP

PDP-11 was so wildly popular, we wanted to be able to encode programs in the same amount of space that we did on the PDP-11

so we created this instruction set that did that.

Uh, but it was very hard to decode.

So we started these, these RISC projects in several groups and we had one at DEC West and there was one

um, there were a couple of other ones.

There were three, I think, in the company

and finally got to the point where the engineering vi- VP's said

"Hey, we need just one of these and we're gonna anoint DEC West to be the keepers of the architecture.

" And that was the Prism project.

So, I started to work on the Prism project a lot like we worked on the VAX architecture where we invited representatives in from various groups that would have to eventually support this thing.

You know, the hardware engineers, the software engineers and whatever

and we produced, uh, a couple of different versions of the architecture.

One was a 32-bit machine and one was a 64-bit machine

and, um, we were progressing along.

We were building a new software system called Mica.

You might have heard of Mica?

Yeah.

Um, and Mica was, um, wildly ambitious

wildly ambitious.

It was, uh, at the level of ambition of M- Multics maybe.

I mean it was.

..

If we'd ever built it, probably no one would have ever bought it

but it had a lot of good ideas in it.

And, anyway, worked on it, worked on it

worked on it, and then finally what happened was

you know, it's, it's not moving forward at the speed I guess the company wanted and MIPS kind of jumped up at the f- the forefront of the RISC processors and

um, the, um, VP of, of research was Sam Fuller at DEC and he was sort of

um.

..

And Forrest Baskett.

You ever heard of Forrest Baskett?

No.

Forrest Baskett was one of the principals at SGI and he actually worked for DEC for a while at a place called WRL which was Western Research Lab.

In fact, they had a RISC processor called Titan that they did.

Anyway, they were all touting the fact that there were companies that could build these one chip systems that were faster than VAX.

And so somebody stood up and gave a presentation that Ken Olsen really liked and the next day they canceled Prism.

And the day after that I quit.

 Uh, but I didn't leave the company.

Uh, I, I, I moved down the street

um, sort of across where Microsoft was down on 520 for a while.

Yeah, I remember there were digital buildings down there right off 520.

Yeah.

And I was gonna start a company and I got

uh, three of the other guys that I worked on

uh, at DEC West.

We were gonna start a company which was going to be a server company and we.

..

I spent a lot of time in Silicon Valley and talking to the VC people.

Uh, we talked to Merrill Pickens.

We talked to, um, to, um

whoever Don Dorr or John Dorr works for.

Oak Investments and a bunch of other ones and we got money.

We had money to start a company and were all signed up to start the company and some of the people that had been at DEC West had s- had left and went to Microsoft.

Mm-hmm.

And one of them was working for Nathan Myhrvold and Nathan Myhrvold

we probably know Nathan.

Mm-hmm.

Nathan Myhrvold had his, his, um, had Bill's ear and Nathan was very high on their whole RISC idea and

uh, then you.

..

Actually that was part of it.

The other part of it was that all of the software that Microsoft produced that was operating system stuff was pretty pathetic.

It was all Assembler.

It was non-portable.

Hey, I wrote some of that.

You wrote some of that?

  So you know some of that

right?

Um, did you know Tim Patterson?

Uh, no.

I did work on DOS but.

..

I mean, I'd met him but I didn't know him well.

Okay.

Um, so anyway, you know, I get this call from Microsoft and they want to know if I want to come talk to Bill about a job at Microsoft and I said

# Chapter 5

we probably know Nathan.

Mm-hmm.

Nathan Myhrvold had his, his, um, had Bill's ear and Nathan was very high on their whole RISC idea and

uh, then you.

..

Actually that was part of it.

The other part of it was that all of the software that Microsoft produced that was operating system stuff was pretty pathetic.

It was all Assembler.

It was non-portable.

Hey, I wrote some of that.

You wrote some of that?

  So you know some of that

right?

Um, did you know Tim Patterson?

Uh, no.

I did work on DOS but.

..

I mean, I'd met him but I didn't know him well.

Okay.

Um, so anyway, you know, I get this call from Microsoft and they want to know if I want to come talk to Bill about a job at Microsoft and I said

"Oh, sure.

" So I go over and I talk to Bill and

you know, Bill was like, um.

..

You know, immediately, "You're gonna take a job with us

right?

" And I'm like, "Well, you know

maybe, maybe not.

" "Well, why.

..

How, how can you possibly not take a job with us?

We're the greatest people in the world.

" And I'm like, "Well, you know.

..

" So I, you know, listened to the spiel and talked to Bill and

and the other guys go talk to him too.

One was Rob Short.

You may have known Rob Short.

Did you know John Belchunas?

Nope.

The other guy was Lon Willoughby and so they all kind of went over and talked and

and I came back and I s-.

..

You know, after all this and I

we talked and I said, "Hey, I'm not.

..

I, I don't see that this is gonna be a great thing.

You know, I'm not so impressed with Microsoft.

"And so, I don't know whether I actually told them I wasn't gonna accept the job or what

but Steve Ballmer calls up and says, "How about breakfast at Denny's on Sunday morning at eight o'clock?

" And I said, "Sure.

" So we had breakfast with Steve Ballmer at Denny's at eight o'clock.

It's the one on 148th that's not there anymore.

Uh, right down from Fred Meyer's.

Yeah, yeah.

And he sold us.

I mean, I don't know, that could've been Wednesday and we signed up

I was there next Monday.

I mean, it was that quick.

So, Steve was the, the, the one that really sold us all on going to Microsoft and that's how we ended up there.

And  I've been a friend and, of Steve's

an admirer of him forever.

Um, he's a great guy.

This is kind of a naive question, but Microsoft already had Xenix in-house.

Yeah.

And they could have, in theory, built an operating system based off that.

But they went and did a clean sheet design with OS/2

and did that again with NT.

Was it licensing or technical?

No.

See, I, uh, it didn't happen exactly like that.

 You know, they did the Xenix thing

uh, and I, I wasn't there then.

Right.

Um, they did the Xenix thing and for some reason

um, they decide, and th- and they.

..

The Xenix thing, there's one piece of the Xenix thing that was genius

and that was they had to get a license from AT&T

and so they, they said to AT&T

"You know, would you consider doing a volume license for us?

For doing.

..

So that as we, we bought more licenses

it got cheaper.

" And AT&T says, "Yeah, we'd probably do that.

" And then Microsoft said, "Well, you know

like over a million, it oughta cost us

like, a couple of bucks or something?

" "Yeah, that's fine.

" So what I, what Microsoft then did was sub-license.

Oh, okay.

They sold their licenses to other people, and made the difference.

They had a big business going selling- Yeah.

.

..

selling Xenix licenses.

Anyway, back to DOS.

DOS happened, um, and, you know

they chose DOS over CP/M.

And there's a lot of stories about what went on there

um, about whether, uh, Digital Research

which was SP- uh, CP/M got stiffed or whatever.

But anyway, they ended up with DOS.

So DOS ships with the first, um

PC, the IBM PC.

And then they decide that, that, you know

DOS is really this program loader.

It's not really much else.

It's just this program loader, and they really need something beyond that.

So they decide they're gonna do this joint design between Microsoft and IBM for OS/2

and this is the 16-bit OS/2, and they're gonna do a new file system

um, and the file system was called HP

HPFS.

HPFS.

And Gordon Letwin, you know, is gonna write the file system all in Assembler and all this stuff

and they got joined at the hip with IBM.

And the whole thing with IBM turned out not to work too well because IBM

a very old company, and the older a company gets

the more rigid they become, the more bureaucratic they become

the more risk-averse they become.

So everything is like, you know, specs upon specs upon reviews and

and mutual sign-off and everything, and the IBM guys are working in Boca Raton.

The Microsoft guys are working in Redmond, and they're just not going anywhere with that.

And so, this story falls into Nathan saying

"Geez, RISC processors are the future and there's no way that we're gonna get.

..

And 16 bits is not enough.

" Right.

"There's no way that we're gonna port OS/2 to anything.

It's not portable.

" Right.

"Um, we should build a system for a RISC system.

" And, um, so one of the things that

that.

..

One of my, my, uh, things I told Microsoft was

I would not work with IBM.

I said, "I'm not working with IBM.

" I said, "They can, they can

you know, comment on the design or whatever

but I'm not working with them.

" And that was a fear of being mired down in their bureaucracy more than anything?

Yeah, it was like, um, if we'd have said.

..

Um, well, even if it, easi- even if it

as it was, you know, they'd come in and they'd review every once in a while and produce their review comments

and they were super negative, you know

and, and they actually split off and did a 32-bit version of OS/2 which quickly went .

Right.

Dove.

Uh, we sent a copy to Lee Risewick of

that OS/2.

 But we had.

..

The guys from IBM that reviewed, um

the design of NT were F- AIX guys from

um, Austin.

Okay.

You ever heard the name Larry Locks?

No.

Larry was their big honcho.

He was their big honcho, and he'd come in with his cowboy boots on

you know, and put them up on the table and pontificate.

Anyway, um, so when, when we s- th- the charter when we started at

at Microsoft was a portable system that would run multiple environments

and the reason for multiple environments was.

..

And OS/2 was gonna be the target.

Yeah.

What, what else was, uh, what else?

POSIX.

Okay.

At the time, everybody was all hyped up about POSIX.

You know, POSIX was gonna, it was gonna unify the UNIX world.

..

. the Unix world started out unified because it came out of Bell Labs and there's only one.

But then the universities got a hold of it free and every university had to put their widget in it.

Right.

And then everybody that, that got a hold of Unix after that had to put their added value on so it ha- it became incompatible.

So POSIX was an attempt to bring all this stuff back together.

And of course the other thing we had was we had

we have CMU with Mach off on the side.

So, um, we had, we wanted to have multiple environments and we actually ha- had

and we, th- the w- the design of the system kind of was to be able to run these multiple environments and we thought that the way to do that was to have.

..

The nucleus of the system would provide the basic services of the system and then they could be con- customized for these different environments.

Um, now I, that's kind of a nave view because.

..

In a sense it's a nave view because there's a lot of things that wouldn't be very easy to do that with.

Um, um, things like thread scheduling or stuff like that

it gets kinda sticky and the process structure gets a little sticky and paging gets a little sticky and.

..

But anyway, that's the way we started out.

And then, you know, we get down the line w- um

we're, we're going along and we spend

we spend about, I don't know, six months to a year on a spec.

And this is a pretty detailed spec, uh

and it's two volumes that are that thick.

Um, The Smithsonian has a copy of those.

Oh really?

Yeah.

It's, it's in the Smithsonian.

So we produce this and, um, we

then we start in on this project and.

..

I'm sorry, start actually doin' things and in the meantime we have this Windows thing and

you know, I don't know, I don't think that Microsoft actually invented Windows itself.

I think they got s- it, some group

somebody somewhere had produced this windowing thing that ran on top of DOS and we bought it from them and we then shipped Windows 3.

0.

Actually, I, it probably wasn't called 3.

0.

It was probably called 1.

0.

Nobody cared.

Then we shipped 2.

0, nobody cared.

We shipped 3.

0, nobody cared.

Then we shipped 3.

1, they sold 16 million copies in six months and Bill said

"I think the main environment of our new system will be Windows.

"  So that's why we went to Windows is because

uh, of the acceptance.

Right.

And th- then the, on the other side was OS/2 with

with the, the, the Presentation Manager and.

..

Now, now, I never worked with OS/2.

I, actually I can't say that.

I never worked with it, I can say that

but I never, I did work on it.

We, we were developing NT on OS/2

even the ones that were targeted towards the RISC machines were developed on OS/2 and we couldn't wait to dogfood

to get off of OS/2.

It was- So one huge misconception is what NT actually stands for.

Well, that, you know.

..

The, the NTen was the i860.

NTen being the codename for the i- i860?

It was the codename for the i860.

The i860 was a, was a, a great graphics processor and that's what it was really intended to be.

It had a very unusual architecture.

Um, it was not operating system friendly at all.

It had a virtually tagged cache.

Virtual tagging of the cache means that every time you contact switch

you have to flush the cache.

Think about that for a moment because the code that's flush

flushing the cache is cached.

Right.

So it became very difficult actually to get th- all that to work right.

The other thing it had was it had

um, it had a floating point mod- model.

It was pipeline floating point, but it was a pull model though where you actually had to pull things through the pipeline.

Very funny architecture, but it worked well for graphics.

It did not work well for operating system.

But anyway, back to the NTen versus NT.

You know, in the beginning there may have been a few words about NT being NTen

but NT really stood for next, next

um.

..

New technology?

New technology.

Sure.

And you know, we had big fights with the program managers because they didn't want.

..

And the marketing people, they didn't want it to be called NT.

They didn't want to call it NT because it si- stood for new technology.

Well, what's the old technology then?

No, it wasn't that.

They said, "Nobody will buy the system because it's new technology.

" Oh, really?

Nobody will buy it.

So we had a big fight about that and

and I won the fight and we called it NT and I think that

that, um, basically NT stands for new technology

but you know, there may have been some fuzzy piece in there where the

the, the letters N and T showed up because of NTen and

um, we said, "Okay, that's a good.

..

You know, it could be new technology.

" So anyway, I, I don't think it really makes a lot of difference.

No, just a point of curiosity.

So were there four CPUs supported for the first version of Windows NT?

Or which CPUs were in- Um- .

..

3.

1?

The first version of NT supported, um

the x86.

..

. MIPS and Alpha.

No, wait a minute.

Y- yeah, MIPS.

It supported the R3000 of MIPS.

I don't think we supported the, I don't think the R4000 was available.

Actually, it pr- I guess it probably was.

So it's the ac- the, the x.

..

32-bit x86, the R3000, R4000, and Alpha.

And I think the PowerPC actually came in like 3.

5.

Daytona, yeah.

Um.

..

Or 3.

5, yeah.

3.

5.

The PowerPC was by far the worst.

Um, IBM, um, was really pushing the PowerPC.

That was their new architecture.

And of course they had had such a success with the

with the  the original PC that they

you know, this is gonna be their big thing.

But they had all these other things that they sold like AIX and their

their mainframes and everything, so they didn't wanna cannibalize anything.

Right.

So they would never produce a machine that was actually competitive.

And the tools, they.

..

I think they did the compiler and it was always broken.

God, we.

..

You know, every day out of the build lab

we, we'd produce four builds or five builds.

I guess it was probably four at that time because we sorta dropped off the R3000.

And  every single day, the PowerPC built and built.

Every single day.

The RISC guys always built and the x86 was pretty reliable too.

Um, but, um.

..

And they kept doing that and they, they never ever actually got to a point where they had a competitive system

so eventually just dropped it.

And they, they would revamp their systems about once a year.

# Chapter 6

But they had all these other things that they sold like AIX and their

their mainframes and everything, so they didn't wanna cannibalize anything.

Right.

So they would never produce a machine that was actually competitive.

And the tools, they.

..

I think they did the compiler and it was always broken.

God, we.

..

You know, every day out of the build lab

we, we'd produce four builds or five builds.

I guess it was probably four at that time because we sorta dropped off the R3000.

And  every single day, the PowerPC built and built.

Every single day.

The RISC guys always built and the x86 was pretty reliable too.

Um, but, um.

..

And they kept doing that and they, they never ever actually got to a point where they had a competitive system

so eventually just dropped it.

And they, they would revamp their systems about once a year.

It's like they don't even.

..

They're not selling any and we're.

..

w- we haven't.

..

We don't have the support yet, they're not selling it

and they're already revamping it for the next one.

Right.

But it's always one level down from the other stuff that they're selling f- for A- AIX or something else.

So  that was a real experience with all

all of those.

And, um.

..

You know, the way we structured the system

um, didn't really make a lot of difference in building it.

It was just the  you had, just had the machines to build it.

Um, and of course you had.

..

We had to fix the different compilation bugs for EAS and then

the, the, the machine-independent code far outweighed the machine-dependent code.

So, the dependent code is the processor-specific code.

Um, and stuff that dealt with memory management and faults and exceptions and interrupts and stuff like that.

So, um, it was.

..

The majority of it was pretty well shared

so it all, all just kinda compiled and worked.

One question I get a lot is, how much assembly is actually down in the HAL?

Obviously a lot of it's gotta be system dependent

but how much of it actually needs to be in assembly language

if any?

Well, some has to be- The HALs

um, are mostly not assembly language.

'Kay.

Um, there are, um.

..

This is now.

Back then, there wasn't much in assembler then either.

Um, the things that would be in the HAL that would be in assembler that possibly didn't need to be in assembler were things that the compiler didn't do very well with

but they were very frequent operations- Right.

.

.

that we wanted to make them run a little faster.

Um, our philosophy from the start, I had witnessed the

the x86 compiler and the inline assembler and how bad that was.

Um, you know, basically the, the inline assembler

every time the compiler saw it, it just threw its arms up in the air and said

"Optimization, no optimization beyond this point.

" So I said, "Hey, that's.

..

We don't want that.

" So the.

..

All the stuff, uh, when we.

..

Well, actually I'm skipping here because I'm talking about 64 bits now

but the 64.

..

This is a 64-bit thing we s-.

..

We said, "We want all of th- the stuff to be intrinsics.

" So all of those operations were intrinsics which meant that all that stuff in the HAL could all be written in the C code with an intrinsic.

So, they might be a machine-specific instr- intrinsic because the mach- the other machines didn't have those.

Right.

Um, but the HALs basically there's hardly any assembler

um, in the HALs and  most of the stuff.

..

Most of the stuff that has to do with interrupt handling

which you might think would be in the HALs is not in the HALs

it's in the kernel.

Um, some of the stuff that's in the HAL that belongs in the HAL is like configuration hardware

uh, like PCI space on, on x86s and

and x64.

And then some other stuff for ARM is in

um, some of the configuration stuff.

Um, the HALs.

..

In fact, the HALs now.

..

The x86 HALs have.

..

We can build them now both ways where we can actually build them as part of the system as opposed to being a separate DLL.

Um, originally they were separate DLLs because they were beyond being a hardware abstraction layer.

They were really a vendor abstraction layer.

Okay.

So there's the HAL-specific stuff but the v-.

..

We, we imagined that, that vendors were gonna build HALs which was a bad idea.

On their own?

Yeah.

Um, and we did have some vendors that tried that.

We had a MIPS vendor, a couple MIPS vendors that tried building their own HAL

um, and didn't do a very good job.

Um, so they've become, um.

..

..

. basically just part of the operating system.

Um, and I wish we would have built them that way in the beginning as just some- just another directory that build- produced an object library that we just linked in.

But we couldn't in the beginning because these had to be pluggable

uh, because we had one basic, uh

SKU with, with different vendors being able to ship the system with their HAL.

 Sometime around, after the original release of NT3 or in the original NT 3.

1, the video driver ran in user code and- It did

it did.

.

..

it was a parallel tracking thread in the kernel side.

Well, yeah.

So there was a fair bit, not a fair bit

it was a certain amount of overhead that we backed out for Daytona.

But now I'm wondering, are CPUs fast enough that that performance difference is still- Still- .

..

relevant?

Oh, yeah.

I mean, today a lot of the stuff in the GPU is

is dedicated towards not just graphics.

And GPU performance is right at the top and this

you know, in that time we had a 64 K-byte window

that's what was shared.

Today, that would have to be 64 gigabytes.

Right.

I mean, it's, so it's like, it's not scalable.

Uh, we worked very hard to make the

this thing work in user mode and to make it so it was okay as far as performance was concerned and we got

we were pretty good with it.

Um, and I was really against moving it into kernel mode because I didn't figure that the guys that did the graphics stuff and in the

in the user inter- user interface, User32

could really write.

..

that really knew enough about writing high quality code and I was right.

 We moved it into kernel mode and we found out all these things that didn't quite work anymore.

Right.

Right.

Like the synchronization model is.

..

when you're in kernel mode, everything's parallel.

And it's parallel and the only way it's not parallel is with explicit synchronization.

And in user mode that's not true.

If you know that you're the only thread

then you're the only thread no matter how many processors there are

then you're the only thread.

Right.

And you're, you're safe.

You're thread-safe so everything's great.

So, so there was a lot of growing pains and it wasn't simply let's just pick up this set of code and move it down here into kernel mode.

Uh, there was a lot of that went with it and the other thing that sort of hampered that too was that all of that old rotten 16-bit code was still in- Oh

yeah.

.

.

the code.

I imagine.

So that all got put in, you know

drawn in and so it wasn't, it wasn't that we had 16-bit code

we had 16-bit data structures and 16-bit, um

primitives that were still there and had to deal with those.

Now those, I think are pretty much gone now.

Um, in fact the whole, the whole structure of all that is different now.

Um, it's not the same.

The video drivers don't fit in the system exactly the same.

Of course that's went through I don't know how many different models

you know?

Right.

Um, the way that works.

Um, and I can't tell you which model they're on now although I am right now right- working on graphics.

Um, um, there's a lot to it.

Anyway, um, it was, it was a good move.

I was not.

..

I didn't think it was gonna be a very reliable move and I've- we've gotten the reliability to the point where it's much better.

Um, we had a pro- a lot of problems for a long time with

with vendors supplying graphics drivers.

Right.

Um, and you know the graphics, they think that everything's great and we'd just show them

we'd show them the, the, uh, the bug data from the field and say

"Here's your NVIDIA driver.

It's got, you know, 20,000 bugs against it.

" "Really?

" "It fails, you know, every.

..

on the average of once every day and a half or something.

" "Really?

" So all that's gotten better.

Earlier you mentioned the Friday WIMs.

What's a WIM and why do you have them?

Well, when we started out when, when I went to Microsoft we took

um, 12 people.

Well, we immediately hired 12 people and we had a hardware group and a software group.

One of the, one of the things for going to Microsoft was we're gonna build hardware.

We decided we're going to build, we're going to build the first RISC PC and we did

we built the first RISC PCs.

In fact we built one with Olivetti with the 860 which Olivetti dearly wanted to ship and we finally said

"No you're not shipping this.

" So we wrote this big spec, we spent all this time

wrote this big spec so all these 12 people that are in the software side of it are all busy doing all this.

But eventually we got to the point where now we're gonna hire people and

and, and, you know kind of fill out the

the group.

So one of the things that.

..

one of the people we hired was Dave Thomson

you remember him?

Yep.

So Dave was in charge of the network group and this is sort of.

..

this is probably more than a year into the project

maybe a couple.

..

uh, maybe a year and a half.

And he came up with this idea that we're

we're hiring so many people and nobody knew each other and that we ought to have some way to get them together so he said

"Let's, w- we'll have something called the WIM and it's the Weekly Integration Meeting.

" All right, so every Friday afternoon there was five

five managers that worked for me.

One of them would go down to the Safeway and buy a few cases of beer-.

..

you know, a couple of, of shopping carts full of chips

some shrimp and whatever, and we'd take one of the hardware labs and open it up and e- invite everybody in to meet everybody.

And that became very popular.

You know, we started out in a room that was probably about the size of this

and we ended up with having these things in the.

..

and then it kinda moved from there.

Remember the, like, building one and two had this reception desk and- Yeah.

.

.

sort of a, um, a, uh

well, a reception area.

It moved to the reception area and then we got Marriott to cater the things

you know, and nobody's going to Safeway anymore.

And then.

..

and this happened, this was like, every Friday night virtually for the time from we started that until the time we shipped 3.

1.

This happened every Friday night.

And one of the things that really up- that I really was displeased with Mr.

Zachary Pascal with, which I'm sure you've read the book.

Yeah, yeah.

Was that whole book was about how we tortured people and the death march and everything

and we never gave them any respite or anything

which was absolutely untrue.

We tried very hard to, to knock that edge off every week

every week.

That's where WIM came from.

All right.

So I enjoy as much open track time as I can get

but you actually went all out with actual competitive racing-  .

..

open wheel and everything.

I did.

How did you get into that and why'd you get out of it?

Well, I think we sh- it's when we shipped 3.

1.

Steve Wood had this brilliant idea.

You remember Steve?

Mm-hmm.

He had this brilliant idea that we should go down to Laguna Seca and enroll in a

a r- a race car driving course.

So, I think about, I don't know

somewhere around 15 people, we all sign up for this course

and we go to Laguna Seca and it's a

I think it's a, a four-day course

and it's in Formula Fords.

And I can't remember that course as being particularly inspiring.

The cars are slow.

They're open wheel cars, but they don't have much power.

Okay.

Um, and they're clunky.

They're really clunky.

The transmissions were clunky.

But anyway, they had.

..

we, we did that, and then we found out that they had

they had another course that was in a different car

which was powered by a Mazda engine, and these were pretty spiffy cars.

I mean, they, they'd go, you know

130 miles an hour.

So a bunch of us signed up for that and did that.

And so we did that, and then we found out that they had.

..

or I.

..

so that was a lot more interesting, and that was a lot more

um, challenging, satisfying, um, whatever.

It was like, it was, um, something that

um, you really had to, to focus on and

and concentrate on to be good at and really practice at.

It just wasn't something.

..

you just don't jump in a car and go off and start turning record laps.

Right.

Doesn't happen.

Well, the main thing too is, while you're doing it

you're not thinking about your taxes or your girlfriend or whatever.

No.

You're considering.

..

you know, you're focused entirely on that one process.

And it's, it's even, it's even tighter than that because you're focusing on in front of the car and what's coming up next.

What happened 10 milliseconds ago or 100 milliseconds ago in the last turn

it's gone, gone forever.

Never gonna see that again.

The only thing you might remember out of that is if you did something wrong.

Right.

And then you're not gonna do that again

right?

So anyway, we did the, uh, the advanced course and then found out they have a

they had a racing school.

Um, not a ra- yeah, they had a racing s- well

they had a race.

..

I guess it's called school y- and it's basically you sign up for two days of racing and then they have

um.

..

it seems like we had a practice day.

We had.

..

oh, it was Friday, Saturday, and Sunday.

And on Friday you did, um, like

a couple sessions on the track, like two half hours or something

and then you did a race on Saturday and you did a race on Sunday

# Chapter 7

Never gonna see that again.

The only thing you might remember out of that is if you did something wrong.

Right.

And then you're not gonna do that again

right?

So anyway, we did the, uh, the advanced course and then found out they have a

they had a racing school.

Um, not a ra- yeah, they had a racing s- well

they had a race.

..

I guess it's called school y- and it's basically you sign up for two days of racing and then they have

um.

..

it seems like we had a practice day.

We had.

..

oh, it was Friday, Saturday, and Sunday.

And on Friday you did, um, like

a couple sessions on the track, like two half hours or something

and then you did a race on Saturday and you did a race on Sunday

and then they had 12 of these.

There, I, I think there was 12.

I don't know, maybe there was.

Yeah, I guess there's 12 because there's two weekends.

So I did that and sort of.

..

then I sort of like, you know

"Geez, you're looking for a little more speed or whatever.

" So they have, they have what they call the pro race

and what they do in the pro race is

it's the same engine, but they just

they sort of take the governor out- Right.

.

..

of the pitcher and, um, uh, open up the exhaust a little bit and they go a little faster and

and the other thing they let you do is screw with the suspension.

So you get.

..

and, and they.

..

the mechanic.

..

this whole thing is built around a mechanic school.

So they're charging you to drive their cars and they're charging these mechanics to train them how to fix the cars

and you're paying for all the crash damage and everything that happens to- Right.

.

.

the cars.

So I did pro race and, and I got to be really good friends with one of the instructors

Case Montgomery.

And so he's talking to some guy that had raced in Atlantics

which Atlantic car is a Formula car-.

..

uh, open-wheel car.

Do you know what a Formula NAC is?

Mm-hmm.

Okay.

So, uh, once upon a time they had

uh, a series that actually raced in Canada

the U.

S.

, and Australia.

And they.

..

There was a car in Australia that had been stranded there.

It'd only been raced once.

And he got this instructor all hopped up about buying this car and bringing it back and racing in the Atlantic series in the U.

S.

and wanted me to know if I'd be interested in

you know, being involved in this.

And I said, "Yeah, sure.

" So, I end up buying the car and he raced the car in 1996.

And I.

..

The next year, we decided we were gonna buy a

a new car for him.

And so we had this old one.

And, uh, it's, it's old in the sense that the

um, the body work is different.

Um, it's a refinement of the aerodynamic of the body.

You know, it's.

..

The engine's the same, the transmission's the same.

Right.

Uh, so it's not like it's just drastically different.

So, the series at the time had two classes within the race.

There was a C series, which was.

..

And then there was the, the guys that were racing for the

the Big Buck Pros.

Big Bucks.

It's called Year Bucks,  you know.

And so, um, I said, "Well

I'll try to drive the car and see if I can do it.

" So I, we went down to, uh

Firebird.

Do you know where Firebird's at?

No.

Huh?

It's in Phoenix.

Okay.

Uh, Firebird is actually on an Indian reservation and they have two courses

two race courses, and then they have

they have a, um, a drag boat course.

Bondurant Driving School is headquartered there.

So, anyway, we go to Firebird and my driving against the instructor's driving

which he's, he's been now in Atlantic for years

I'm only off by two seconds in his lap time.

So, they sell me on the fact that I oughta race.

So, that's the start of my racing career

which was 1997.

Wow.

I did 56 races.

Uh, my last race was at the PepsiCo Center in Denver and we raced

we raced all over.

We raced in Hous- uh, we raced in Houston

um, the street course there.

We raced in Florida at Homestead.

We raced in, um, Nazareth, Pennsylvania.

We raced in Monar- uh, Toronto.

We raced in Mon- Montreal.

We raced in Trois-Rivires, which was, uh

by, um, north of Montreal.

We raced in Vancouver.

Um, I did Vancouver several times.

We raced in Portland.

We raced at Laguna Seca.

Um, we reaced- we raced at Long Beach.

We raced at Mid-Ohio.

Um, raced at St.

Louis.

Raced in Chicago.

So, I did 56 races and the last one was in PepsiCo.

And I was sort of like, I was 60.

That was when I s- I quit when I was 60.

Um, this is 2002.

So, it's a few years ago.

And I was sort of at the point where every year I got better and every year everybody else got better.

But they got better faster than I did.

So, I became more competitive and so I was.

..

My best finish was.

..

I finished eighth at Milwaukee.

Oh, I forgot.

Milwaukee.

I've rac- the Milwaukee Mile, th- the oval.

I was.

..

The, the ovals I was very good at.

Um, the s- the street courses and the road courses

um, I wasn't as good at.

Um, but the, the ovals, the younger guys don't got the cajones

right?

 You know, there's only two kinds of oval racers.

Did you know that?

No.

There's the ones that haven't hit the wall and there's the ones that have.

And the ones that haven't are gonna hit the wall.

So, eventually you're gonna hit the wall.

And I had, I had two big wrecks on the wall.

One in St.

Louis and, and one in Phoenix at PIR.

That was just testing.

Anyway, that's how I got in.

And I got out because, um, you know

I, I sort of was at the point where I'm pretty old for doing th- to be doing this.

There's nobody else 60 doing this.

Right.

You know, they're all 19, 21.

Um, uh, you know, I thought a little bit the cost was prohibitive

 it was tremendously prohibitive.

The way to s- to make a big fortune in racing is to start with.

..

To make a small fortune in racing is to start with a big one

not racing.

Right.

Um, but the, the other thing was

this took up a lot of time.

Um, you know, we travel on Thursday and get home Sunday night.

And we had 12 races a year and then you couple that with

um, testing and we'd do at least six test days.

And test days were.

..

Usually a test day was a test weekend

so we would arrive on Friday and test Saturday and Sunday.

Um, so I just kinda got worn down.

Let's see.

After, uh, Daytona, do you remember Bob Day?

I do remember Bob Day.

So I and Bob Day and a couple of guys did the port of the Windows 95 user interface over to NT

and we got it running on the Intel 351 basically.

Um, and that was sort of integral to the Tukwila project

and it was helpful in killing off Cairo

but I didn't get to go to any of those cool meetings.

So what actually happened in those years in behind the scenes?

 You know, what happened was they hired Allchin

and Allchin came from Banyan.

And Bill was big on Allchin, and Allchin had these grand ideas about building this user interface in Cairo and everything.

And, and, um, Windows 95 had been brought out that interface and was pretty popular.

And, you know, we wanted to bring that over to NT

and it's, "No, we gotta do, take it to Cairo.

" And so, you remember Megan Bliss?

Mm-hmm.

Megan Bliss and I convinced Jim Allchin that we could do Tukwila and Cairo at the same time

that we had enough lab horsepower to do that.

Of course, you know, I don't know why he bought this story

but he bought this story.

We said, "Here, here's what we'll do is

you know, we'll basically still have the two groups.

We'll have the Cairo group, and we'll have the Tukwila group.

" He didn't like the name Tukwila.

And the, the T-shirt, I don't if you remember the T-shirt

it says- I was gonna wear it tonight

but I decided not to.

 It says, it says, it says

"Tukwila, it's just down the street a ways and we know how to get there.

" We can get there from here, yeah.

We can get there from here.

So the deal was that every day, we would put priority getting

uh, Cairo out of the build lab first

and then we get the rest of it out.

And it turned out that every day, Tukwila just came out

every day, and Cairo was always broken.

Right.

It took forever.

And little by little, the Cairo features didn't get done

and they never.

..

One of the things we did with, uh

with NTFS, we said, "You guys can change the file structure as many times as you want

but you can't stop people from booting old systems and using old file structures.

You have to either do an upgrade in place or you have to accept the old stuff.

We're gonna be dog food on this file system.

" The OFS guys never did that, right to the very end

and they kept promising and promising.

So they didn't get all of the, the burn-in.

Right.

And eventually, they missed a date, said

"OFS is gone.

" Say that's gone.

So little by little, these features, they just never delivered

and they just never delivered, and Tukwila just kept growing and growing and growing.

And eventually, the only thing that I can remember that we really brought over

actually maybe two things.

I think we brought over the ser- the file server software.

I think that that replaced the NT one

and the other thing we brought over was Kerberos.

Those are the only two things about Cairo.

Everything else was junked.

Really?

What'd they become of it?

Completely junked on the floor, um, it just wasn't there.

The people, um, I can't really, I

I guess I shouldn't really say anything.

Uh, there was a lot of good guys that worked on Cairo

um, and I don't, I just don't think that the whole project had the focus and the desire to make it really great.

And it just fell by the way because

you know, on the other side of the fence is the NT group

and they're not letting up.

Like, uh, they're full on the throttle.

And Megan did a great job of selling all this.

We, uh, it was.

..

I can remember the day we did this with Allchin.

We were in one of the conference rooms in Building 36

and said, "Hey, we could, we'll just do

Tukwila will just be a backup, it's just a backup.

" NT 4.

0, I think is, is still one of the most popular ones that ever sold.

Yeah.

Uh, I ran into somebody, I don't know

a couple years ago, that was still running NT

they still had NT 4.

0 running on something.

They still loved it.

Yeah, I've got it on a model 95 over there- Yeah?

.

..

a big IBM tower.

But, uh, scheduling software is notoriously hard

of course.

And the original, uh, version of Windows was supposed to take two years or three years.

I forget what was estimated, but it took longer

let's say.

Which one?

Windows NT?

Yeah.

Yeah.

It was supposed to be three years, I think

two years.

We did VMS in two years.

Right.

And VM, VMs, but in VMS, there's

there's,  there was some difference.

In VMS, we had probably the whole project had 20 people

and that included the compiler people, um

and the main, the main thing, uh

the tools there was the FORTRAN compiler because we were selling that as a

a FORTRAN machine.

But every single one of those people were

you know, really just top-notch people.

Um, and so it was a very

very talented group, extremely talented, and, and g- we did not have that with

with, uh, the NT group completely.

I mean, w- we had, we had a good core

and we had great people, but it wasn't as small a core

and we had to do more stuff.

Right.

Right?

Um, so, and then of course, we

we had some other things in there too where

you know, we, we threw out the 860

and then we started on MIPS.

And then digital came along and said, "We wanna do the R3000 in addition to the R4000.

" And then we decided we're gonna do the x86 all before 3.

1 st- shipped.

So originally, it was just going to be one architecture and we were gonna sh- do the system for it

and we end up with all these architectures and actually throwing out the

uh, the 860, which was a godsend because that would have never.

..

I, I mean, it was so bad.

 It was terrible.

The rec- the, there were so, the errata sheet

I swear, was, it was a half-inch thick.

Really?

Oh, it was everything.

And Intel would come and say, they'd say

"There are some new errata discovered, you know

floating point something doesn't work.

No problem though, the Intel exception handler handles that.

" Well, we didn't use the Intel exception handler because it was so buggy

it didn't work.

So anyway, um, that's how Tukwila came about and how Cairo ceased to exist.

All right.

I think about the time I started, um

there was a famous incident where you punched a wall and they framed the hole.

I did.

That was at the- But I don't know what's that about.

 That was at the 25th anniversary.

I had, I brought in the.

..

I still have that.

The drywall?

Yeah, that was NT, uh, System52.

That was an argument that I was having.

We were having some stressful moments about the debugger

and the debugger not being very functional, and work didn't seem to be progressing very fast

uh, definitely not progressing at the speed that I thought it should be progressing at.

# Chapter 8

floating point something doesn't work.

No problem though, the Intel exception handler handles that.

" Well, we didn't use the Intel exception handler because it was so buggy

it didn't work.

So anyway, um, that's how Tukwila came about and how Cairo ceased to exist.

All right.

I think about the time I started, um

there was a famous incident where you punched a wall and they framed the hole.

I did.

That was at the- But I don't know what's that about.

 That was at the 25th anniversary.

I had, I brought in the.

..

I still have that.

The drywall?

Yeah, that was NT, uh, System52.

That was an argument that I was having.

We were having some stressful moments about the debugger

and the debugger not being very functional, and work didn't seem to be progressing very fast

uh, definitely not progressing at the speed that I thought it should be progressing at.

And I was having this argument, I think it was with Brian Willman

in one of the corridors in building two

and I said something in, uh, or he said something that really ticked me off and I went wham like that.

It's a good thing I didn't have the two-by-four.

I hit between the, and they're metal

you know?

 Yeah.

So I hit between them and yeah, it went through the wall.

So unfortunate that a lot of the code that I wrote back in the day still lives on in the code today.

And I don't know how common that is.

How much do you think of NT 3.

5 is still in Windows 11 today?

A lot.

'Cause I mean, it's growing a lot- Well- .

..

but the core pieces still- The, of the original code

of the same functions that the original code did

I would say, you know, it's 80%.

Okay.

It's very high.

Right.

But there's a lot of added stuff.

Yeah.

Um, there's a lot more stuff added around security.

There's a lot more stuff added around management.

Uh, there's a lot more s- stuff added around

um, just building the system.

Um, you know, what you remember of build is gone-zo.

I mean, it's, um, it's become a system of its own.

 Really?

Um, so a lot of it's still there.

You know, the kernel code, memory management code.

Uh, Landy, you know Landy Wang probably?

Mm-hmm.

Landy manages to probably pretty much rewrite memory management about once every three years.

But there's a lot of memory management functionality that's

that's new, um, that's all been done since then.

But the basic, uh, structure and the basic code from the beginning is still there.

Um, the process structure's still there.

The kernel's still there.

Um, there's s- been a lot of stuff added around

um, there's some stuff ar- added around for- uh

fairness in scheduling, um, and some other things.

And of course, there's more objects.

Um, I think one of the things I think made NT such a good code base was the object manager

and that has not changed.

Um, if you look at Unix, you know

everything's a file.

You want to extend the operating system?

Create a new file system.

Not a good thing.

Right.

I mean, there's even, you can even read papers that some of the

the grandy, grand, the grand poobahs of the

the academic world say, "You know, maybe we were wrong.

Maybe everything isn't a file.

" Anyway, creating object is easy, you know?

You just have to build an object-type descriptor

integrate it into the object manager, and presto esto and write a few services and there it is.

You have a new object, and that object can

can provide synchronization, it can provide a lot of things

right?

Um, so I think that was a

um, just a really great, um, underlying

uh, structure that went into the operating system that

that's lived on.

Um, you know, we've rewritten a lot of things.

The handle table has been rewritten several times.

I don't think we've done that lately, but

uh, you wouldn't think that handle translation would be a per- performance thing

but it is.

Mm-hmm.

It's a real performance thing.

And, and, you know, typically you run a system

like my system at work runs with, I don't know

like 60 processes and, you know, I don't know

um, a couple hundred threads, and 150

000 handles are open.

That means there's 150,000 objects- Right.

.

..

in the operating system that are being tracked.

They all have security, um, you know

have access protection.

Um, so anyway, though a lot of the code is still there

um, but a, a whole bunch of stuff is

keeps getting added, um, a lot of stuff.

So the, of the original code, I

you know, I bet you the original code is not a large percentage of the total code.

Right, right, right.

But if you took the total code.

..

Yeah, no, it's gonna be a small

tiny percentage, yeah.

It's just, it's, 'cause it keeps going down- Yeah.

.

..

'cause all this stuff gets added.

But it's like the, the one thing I always like to use as an example

the original task manager compiles to 85K and now it's four megabytes

and it does more than it did but not-.

..

many multiples of times better.

You sh- The task manager, I, my system

I have two, I have two, um

AMD Ryzen Threadrippers.

And one of them is smaller than the other one.

The small one is 64 cores with 130

128 threads.

The other one is 96 cores with 192 threads.

You should see what the task manager puts up for the

you know, the per CPU utilization.

It's, it, it's unviewable.

I mean, you can't s- It's just all

you know, it's all these little boxes with all these things going up and down.

Right.

You can only really look at the overall performance.

Or if they, I, there's no option to say

you know, "Take this group of eight over here.

You know, put those together and sort them.

" Yeah, you'd think you could heat map it or do some kind of visualization- Maybe you can.

.

..

that was useful, but.

Well, there's, but there's also a lot of other things

too.

There's, there used to be on the task manager

used to be the network stuff and the CPU stuff

but now there's the, there's disc and there's other stuff

so.

People often ask about Longhorn.

And I believe that was the precursor to Vista

or became Vista, or it was along the way to Vista.

Well, there's a lot, there's a, there's a

there's a big story behind that.

Okay.

Let's hear it.

 So when we finished Windows 2000, Windows 2000 was done on the co-same code base as

well, I'm sorry, the work station and the server were the same code base.

So we went off to plan the next system.

And the guy that's gonna do the work station is Chris Jones

and the guys that are planning the server is Dave Thompson's group.

And they come back and say, "Thompson says it's gonna take

it's gonna take, uh, three years for us to do the next server version.

" And Chris says, "Oh, I can't live with that.

" He says, "Consumers don't expect the quality that

that the server people do.

We can do it in a year and a half.

" So, we said, "Well, we can't

can't do that, right?

" We, so thereupon we split the code base.

The server went one way and the consumer vision went the other way.

It wasn't long before the consumer software hardly would build and hardly would run.

In the meantime, the server branch, we fixed a whole bunch of server

I'm sorry, security problems.

Right.

A whole bunch.

And, uh, we might even done some security update

but there was a lot of stuff that went into the server

um, effort to fix security bugs, and none of that stuff was fixed in the other one.

Well, we finally shipped XP, and XP was wildly successful

uh, but then, but it was buggy.

But then there was a big, um

turmoil about security.

And that's about when the, um, the buffer overflow attacks started.

Right.

And so we stopped.

..

And in fact, the other thing was as soon as they shipped

um, XP, that became the code base for Longhorn

which was Vista.

So they're continuing on with this buggy code base without all those security fixes in it

and the server division basically is developing the server stuff

and, but fixing security problems.

And in the meantime, in the middle of this

in the middle of this, sort of somewhere in here

I start this project that's a, uh

it's a, uh, off on the side that is the

um, x64 stuff.

Okay.

So AMD comes in and talks to us and talks to Rob Short and I

and says, "You know, um, we have some ideas on how to build 64 bits extensions to the x86 that will be very less intrusive and will allow us to run 32 bit applications at speed on the 64 bit machine.

" We said, "Geez, that's pretty interesting.

What have you got?

" "Well, we've got just a few ideas.

" And then we said, "Well, you know

go away and come back and tell us what you wanna do.

" So they come back and we look at it and say

"This is great.

This is great.

" I mean, it's, like, unbelievable.

So I said, "Hey, we're gonna do this.

" So we just set out to do this.

This, this is not a company-annointed project at all.

And I say, "We're using the server code base

and we're gonna produce a 64 bit work station and we're gonna produce a 64 bit server.

" Meantime, we got Longhorn over here still going

and its name is now morphed into Does it Matterhorn.

Right.

So it becomes Does it Matterhorn.

And Alton, of course, he's my boss

and he's running Longhorn.

I mean, he's responsible for that, and I'm running this x64 thing

and the server group is, is, you know

they're, they're off, they're shipping a system

and we're just using their code base.

Well, we build, um, we get the x64 system running well enough

we get everything ported, and we have a simulator that allows us to simulate setup.

..

. and we simulate setup.

It takes 24 hours, 24 hours.

The simulator's called SIM Now.

And AMD finally ships us a system.

It arrives at 12 noon, and they say

"There it is.

" And we got a CD.

And we walk over to that machine, plug the CD in

and boot the 64-bit system.

The first time it's ever been tried, and it boots and runs

and it runs, and it doesn't fall over and bug check.

So this sort of piqued the interest a little bit at that point

and, um, we get reliable enough that we actually convince Microsoft.

com, that website, to switch over to our 64-bit server

and they run it.

They only have to run it about a week and they switch everything.

Really?

And, and you know why they switched?

It became.

..

it was so immensely more reliable than the 32-bit stuff

they just switched like that.

And the reason was that their software.

..

I got cramps in my legs.

The software has got so many memory leaks in it

that on a 32-bit system, they keep leaking memory until eventually they got the virtual memories all filled- Right.

.

..

and then they have to roll over.

The 64-bit system, it took a long time.

So we had Microsoft.

com running on it.

So we got to a point where the

the, the guys just couldn't get Longhorn or Doesn't-Matter-Horn out of the build lab.

And I told Alton, I said, "This is just baloney.

You guys should switch the codebase to the x64 codebase.

" And eventually that's what we did.

So you unified them back again, so the server worked- Well- .

..

super all the same?

.

..

and I mean, I, I should.

..

We left, I left out one thing.

We stopped in the middle of this, this

in the middle of th- th- we didn't actually stop the 64-bit effort

but, but the 64-bit effort is mainly we're just porting stuff to get it run 64 bits

and we didn't have to port everything.

It was much like back in the days of VAX where all the 30-bit stuff just ran.

Your, your task manager just ran.

Didn't have to change a thing.

The only thing that changes in the task manager was

um, where it said what your process list was

I put an asterisk in so it could tell whether it was a 32-bit or- Okay.

.

..

a 64-bit one.

It's the only thing we changed.

So in the middle of this, though

the, the security of, of XP got so bad

we had to actually stop and fix XP bugs.

And we fixed a lot of.

..

uh, my, my group fixed like 5

000 of those.

And we went through everything, and we

we turned over some code that, you know

like a shovel you turn over manure.

Uh, I think the worst code I probably looked at was the IME code that was done in Japan.

Oh, okay.

Just, just terrible.

Like, just no regard for any bugs at all and any bug condition

they just, "Oh, okay, that's bad.

Okay, we'll just skip that then, you know

just keep going.

" So there were actually overflowed bugs we couldn't fix.

We just couldn't fix them, you know?

We, we tried to mitigate them as best we could

but we couldn't fix them.

But anyway, we c- there was a release of XP that was a

it was an update.

It was like a 250 megabyte- Okay.

.

..

dump.

And then they switched the codebase for, um

Longhorn to the x64 codebase, and that's the codebase we're on today.

And everything is still unified now?

Everything's unified.

What about the stuff that went to Xbox?

I don't know much about Xbox technically, but I know that it runs a hypervisor that's similar to what goes on in NT.

Is there code shared or just ideas?

Uh, well, the, the hypervisor for Xbox came from Red Dog.

And Red Dog is the hypervisor that was developed for Azure.

Um, when we shipped the 64-bit system

# Chapter 9

" So there were actually overflowed bugs we couldn't fix.

We just couldn't fix them, you know?

We, we tried to mitigate them as best we could

but we couldn't fix them.

But anyway, we c- there was a release of XP that was a

it was an update.

It was like a 250 megabyte- Okay.

.

..

dump.

And then they switched the codebase for, um

Longhorn to the x64 codebase, and that's the codebase we're on today.

And everything is still unified now?

Everything's unified.

What about the stuff that went to Xbox?

I don't know much about Xbox technically, but I know that it runs a hypervisor that's similar to what goes on in NT.

Is there code shared or just ideas?

Uh, well, the, the hypervisor for Xbox came from Red Dog.

And Red Dog is the hypervisor that was developed for Azure.

Um, when we shipped the 64-bit system

we shipped it on Friday.

..

on Thursday, I quit on s- I quit.

I sent mail to Bomber on Friday, said

"I quit," because it was so bad.

I had such a problem.

I couldn't get any traction on FCIBs.

Do you know what FCIB is?

Do not.

An FCIB is a fucking checked-in binary.

 And the reason that it's called a fucking checked-in binary is because we had all sorts of groups at Microsoft that checked the binary in rather than the sources

so it made it very difficult to port stuff

and it was stuff that was in the product.

Right.

And so, I was so fed up with not being able to get support from Bill to obliterate this stuff and say

"Hey, you guys have got to get your sources in.

You don't have to port it.

We'll have somebody else port it, but you got to get your sources in.

" So I quit, and I, I'm gone for.

..

Uh, Bomber sends me mail and says

"I don't think you ought to quit.

Why don't you take some vacation and think about it?

" So I answered and said, "Okay.

" That was March 28th of 2005.

In November of 2005, it started to get.

..

the weather was bad so I had to.

..

I didn't have anything to do anymore, so I  came back to work.

And, and I think February I went to work on Azure.

And Azure was the, the, uh, premise.

..

Azure was, um, sponsored by, uh

Ray Ozzie, who was the software architect of the company.

Uh, do you remember Ray?

Probably not.

Ray Ozzie?

Ray Ozzie.

By name, but that's about it.

..

. anyway, it, Ray looked around and

and w- we had all these properties that were producing cl- cloud-based stuff

but there's no, there's no infrastructure, platform inst- infrastructure to work on.

How do you deploy the applications?

How do you do configuration control?

What version is running?

How do you do restarts and all sorts of stuff?

So, he talked Bomber into, and, and Gates into starting this project

which became, was called Red Dog, which be- eventually came

um, Azure.

And so, this was gonna involve virtualization.

Um, so this is at the same time that

you know, we, we, I bought a company called Connectix.

Right.

And Connectix came to Microsoft with two products.

One was called Virtual PC and the other one Virtual Server.

And they had started development of a hypervisor

and we, we actually took their, whe- where they were at at that time

which they were very embryonic, and we built a hypervisor to bring Azure up with.

And when I left Azure to go to work on the Xbox

um, eh, uh, the Red Dog hypervisor became the basis for the

um, Xbox hypervisor.

Okay.

All right?

So, the Xbox, the, the structure of Xbox is we really run t- three different co- copies of operating systems.

We, and we run in three, we run just three VMs.

We, n- like, in Azure we run hundreds of VMs.

You, you spawn VMs, you, you know

you spin 'em up.

And Azure was all about th- the platform and building all the infrastructure to

to provision new machines, bring 'em online

keep track of 'em, do the billing

the, the, uh, the cloud file system

just all s- that stuff.

It was called PaaS.

And we thought that everybody was just, that was what they wanted.

And, and what, um, AWS was serving up was IaaS infrastructures.

So, on, on Amazon, you actually bought

basically, a virtual CPU.

We were saying, "We're gonna sell you the stuff that allows you to deploy things

" right?

You can run, you can deploy a s- uh

an operating system, and you can deploy your applications and keep track of them and do billing and all this stuff.

So anyway, going, stepping back to, to Xbox again

we, we, we're only running three VMs.

We're running.

..

we have two VMs that run all the time.

One is the host system.

The host system owns all the devices.

So all the hardware access to devices is in the host system.

The host system is also sort of the traffic cop for any communications between the VMs.

And we have, we have formal communication b- between the VMs as opposed to

to Azure where there's.

..

the only c- communication between VMs would be where you had

uh, actually a network connection to somebody through a VM.

You know, you don't have anything where you're not

you're not close as a, as an operating system.

So, we have one OS that runs

um, basically what you see is the presentation.

Right.

You see the windowing system.

The window manager runs there.

And then, and that one's, that one's

uh, running all the time, and the host system runs all the time.

And then we have a game VM.

And the game VM starts and stops all the time.

Is.

..

when you.

..

a g- a, a, a game is a VM.

Right.

So games got packaged, w- uh, with an OS.

So, and this is a f- this is a feature and not a feature.

It's a feature in the sense that you never have backward compatibility problems because you say

"Here is the OS that you can package your game with

the c- the current version of it, and it comes in a GDK

which is a graphics development kit.

" You develop and package your game with that stuff in that development kit.

"And when we run your game, we run that VM with your game.

" So, it always runs.

It never, the, we will never ov- obviate your game by some change in the operating system.

That sounds great.

W- Hard to update stuff.

Huh?

Hard to update stuff too if you can't modify it later.

You can't.

..

um, they're.

..

the update, you can do an update to your own stuff

and you have a choice.

Your choice is you can stay on with your old.

..

The place where that didn't work, and we actually ended up producing a universal game operating system for stuff that was prior to

uh, this latest Xbox, um.

..

what do we call?

K- Xbox X, I think?

Uh, not X.

I don't know, whatever console came out about five or four years ago.

One?

Yeah, X.

..

no.

Yeah, maybe it was.

It wasn't.

No, it was always called Xbox One

wasn't it?

Yeah, Series X would be the newest

right, I think?

Yeah.

Is the Xbox One's the new one?

 I don't have one, I don't know.

Any- anyway, we came across a f- uh

a thing that we wanted to add a feature that was a very

uh, important feature for selling systems, and we had to find a way to get that feature into these old copies of these games.

That's what I meant by updating the existing

yeah.

Well, I thought you meant update like bug-fixing.

The bug-fixing is like.

..

if, if, if you wanna put a- out a bug fix thing

we will fi- we fix bugs on these GDKs.

..

. but you package your game again.

Oh, okay.

All right?

Your old one doesn't get the bug fix.

Okay.

That makes sense.

The guy's running the old one, he runs the old one.

All right?

So, this, this thing we, we did was

it's called pau- pause/resume.

And so on the Xbox, it takes forever to load a game because there's so much data.

I mean, there's gigabytes and gigabytes of data that come with it.

There's texture data, there's image format stuff

and all.

..

just a bunch of stuff.

Well, pause/resume allows you to do basically a save of the VM

and then bring it back later.

Uh, so we had to get that into these

th- these systems.

So we produced this universal one, and the universal one's kinda interesting because one of the things we'd done was

uh.

..

The original NT had the capability for drivers to

to create system service dispatch tables, and of course some of them did.

And of course our original graphics, um

our ga- game VM had its own, and then several other releases had modifications to that.

So this universal OS has to translate all of the system service call numbers according to what the version is of the- Oh

okay.

.

..

th- the game was packaged with.

Right.

Anyway.

That's kind of a sidestep.

Anyway, that's the way the game runs.

Um, so, you know, you run a game and then you can

you can, um, just let it pause or

or.

..

I'm sorry, pause, sleep, or whatever

while you're not running a game.

Or you can start another game, and if you start another game then you actually kill off the VM and start another one.

So they.

..

So we started out with.

..

The whole system is Windows 8 based and we wanted that to be as minimal as we could make it.

So that one's really custom.

It's, you know, it's been hacked down.

But, you know, the basic  structure

the object manager's still there, events and all that stuff are still there

scheduling is still there.

Um, drivers fit into the system the way they did in

in, in circa that.

But there's a few more things that are there that

that allow for communication with the other VMs or cross

crossed VM, uh, stuff.

So that's Windows 8.

The, the one that has the, the

um, display.

..

Basically the window manager is, um, based on the current version of Windows.

Okay.

And it's based on it, right?

And we don't really.

..

There's some stuff replaced and stuff left out.

In the operating system itself it's.

..

there's a lot of conditionals, uh, conditional compilation to take out things that

uh, we just don't want in the Xbox op- operating system.

Okay.

Um, and so on the mirror of that

which is the VM that the games run in

is also Windows 11 based.

Um, and it has.

..

It's almost identical to the other one.

Uh, one of the things that's different is

um, they both interface with the graphics driver but it's not

it's not symmetric.

It's not uniform.

One side uses the Windows 11, uh

stack.

Okay.

And the other side uses a very highly customized DirectX stack.

So that's a little different.

And that's just mainly to make the graphics

uh, for the games run better.

So going back a little bit, a long ways back.

Back to high school, I'm told you had s- collected 16 varsity letters?

I did.

Is that really four varsity sports per year

every year- Yes.

.

.

for four years?

Yes.

Which four?

I did track, baseball, basketball, and football.

And did you go to college on an athletic scholarship

or- I went.

..

I had, uh, three quarters of my scholarship base was athletics and one quarter was academic.

And then at some point, s- Now I have a senior of my own who's quarterback for the team and he just blew out his appendix in week two

so he's got four weeks off, so he knows a little bit about the dreams deferred.

But you've damaged your knee at some point

did you not?

Uh, with.

..

after I.

..

Well, I was playing football.

Uh, actually, my first injury was, um.

..

What was my first.

..

My first injury was in football and I broke my leg.

And I b- I broke my fibula in October of my sophomore year

and, um, I actually ended up playing half of the game on a broken leg.

Um, the doctor we had was the team doctor

was.

..

This is, you know, 1961, 1962

and, um, not the kind of team doctors you necessarily have today- Right.

.

..

with medical ex- expertise.

So, um, I came over to the sidelines and my

my leg really hurt.

And, you know, he's squeezing my ankle and saying

you know, "Does this hurt?

That hurt?

" And, uh, I said, "Nah, it's okay.

" And he looks at the coach and he says

"Do you really need this guy?

" And the coach says, "Oh, yeah.

He's.

..

" He says, "Okay.

" So he opens up his case and he gets out a hypodermic and gives me a shot.

And so then they tape everything all up and they say

"Okay, go up and run down the sidelines.

" So I, you know, tried to to- run up and down the sidelines and I said

"You know, this doesn't feel good enough for me to play or to run.

" Right.

And the doctor looks at the coach again and says

"Do you really need this guy?

" And they s- he says, "Yeah.

" So he gave me another shot.

So I went and played the rest of the half

and then at halftime, you know, this stuff wore off and it just.

..

so there's no way I could play in the second half.

So the doctor says after the game, "Maybe we should go to the hospital and get this x-rated.

"  So it was, it was just a

a break in the, uh, the bottom of the fibula.

It just, um.

..

it seemed like it took forever to, to heal.

But anyway, it.

..

the following spring, I tore up my right knee playing basketball.

Okay.

And, um, in those days, um

anything that happened to your knees, um

that even smelled of cartilage, they said

 "Uh, we have to take the cartilage out.

" I mean, today, they don't do that.

Right.

They, they go in there and if you have torn cartilage

they might sew it up.

Uh, they might trim it up a little bit.

Um, th- or well, arthroscopic surgery- surgery didn't exist then.

Right.

So, they ripped out my meniscus in my right knee

and I came back the next year to play and I

# Chapter 10

It just, um.

..

it seemed like it took forever to, to heal.

But anyway, it.

..

the following spring, I tore up my right knee playing basketball.

Okay.

And, um, in those days, um

anything that happened to your knees, um

that even smelled of cartilage, they said

 "Uh, we have to take the cartilage out.

" I mean, today, they don't do that.

Right.

They, they go in there and if you have torn cartilage

they might sew it up.

Uh, they might trim it up a little bit.

Um, th- or well, arthroscopic surgery- surgery didn't exist then.

Right.

So, they ripped out my meniscus in my right knee

and I came back the next year to play and I

I went through all the, you know

the preseason practice and everything which all happens in August

and this is in Michigan where it's just excruciatingly hot

and we get in the first game and I tear up my left knee.

Huh.

The same thing.

So, here I am, you know, within

uh, about, about 10 or 12.

..

12, 11 months I've had a broken leg and two knee operations.

And I came out the next year to play again

and, um, I'd had all this time where I'd been on crutches for the broken leg and everything.

You know, and not being able to walk

you kind of take walking as, for granted

you know?

It's like, "Well, I can walk," you know?

Right.

Well, when you can't walk, it's like

"Geez, I don't think I wanna do this the rest of my life.

" So the doctor did an exam on me and he says

um, "God, your knees are really weak.

" And I don't know, he.

..

this is the team doctor again.

 Like.

..

so he scared me enough that I said

"Hey, I, I'm, you know, I'm through.

I'm not gonna play anymore.

" So I didn't play after that.

So what happens on an athletic scholarship if you can no longer play?

Do you risk your scholarship or not?

Uh, in, in that- In those days.

In those days, I actually.

..

the scholarship was good for the whole thing.

Awesome.

And it was.

..

this was a Division III school and the scholarship situation was very funny because they

they didn't really have scholarships or athletic scholarships

they had something called grants-in-aid.

And a grants-in-aid could be given to any student.

So I just.

..

I had three grants-in-aid for the three sports.

I only played three sports in college.

I didn't play four.

Um, and I had an academic scholarship and I did.

..

my academic scholarship was such that I had to have a B average at the end of two years

and at the end of the two years

the only semester my whole college career I had a B- average

so they took my scholarship away.

Really?

Yeah.

Anyway.

So you've played for a lot of teams

you've probably played for a lot of different coaches.

Is there anything about any of those teams or coaches that informs the way that you run a software team today or that informs what you expect from the people on it?

Well, I had one coach, um, which was the second coach I had in high school that.

..

who was sort of a, somebody that I really looked up to.

His name was Bob Dilday.

He was from Michigan State and he played quarterback with Tommy Yousic.

Do you remember Tommy Yousic?

You probably don't.

No, no.

Tommy Yousic was, um, one of the great quarterbacks from Michigan State

and he was a real, um, hard-driven

you know, wanna win kinda guy, and I think I sort of

um.

..

that really, uh, was something that I kind of

um, was, um, attracted to and I really looked up to him.

Um, unfortunately he didn't.

..

he wasn't there my whole y- my whole career in high school 'cause I think I could have done a lot better because he pushed people and

and got a lot more out of the people

um.

Uh, you know, I'm.

..

I'm all for.

..

I'm not somebody that, uh, wants to drag

drag people up.

I wanna motivate people to do what they oughta do

right?

Right.

So, and he was one of those kinda guys.

I think you have a saying somewhere that is

uh, successful people do the things that the unsuccessful people typically refuse to do.

Yup.

Any good examples of things like that in daily life as a software engineer?

Well, you know, I think tha- that

that saying kinda came from people who, you know

th- they say, "I only write the code

I don't test the code.

" Right.

Or they say, you know, um, "I don't care if

if the s- the schedule says we're gonna ship two weeks from now

I mean, at 5:00 I'm outta here.

" And so, I learned very early at Digital that if we're.

..

and if I wanted things to happen, that I had to make them happen

and that might mean that I did a lot of things.

I might be fixing bugs for other people.

I mean, people hate to fix their own bugs and that's another thing.

It's like, um, people don't wanna fix bugs.

You know, it's like, "Well, you know

I wrote the code, it's good enough.

I'll.

..

you know, we'll f- we'll shake all this out in testing.

" Well, I'm not a believer in that.

I'm a believer that you're, you should do the best you possibly can do and then we'll find the ones after that and it'll be even better.

Um, so, I think it's this, this thing about doing whatever it takes to make things successful is what I really mean by that.

Right.

Uh, it's not necessarily a specific part or any part that would be the most glamorous part of what you're doing.

Um-.

..

like somebody saying, "I'm an architect.

" Well, you know, it's like Fred Brooks.

Fred Brooks says, "There's thinkers and there's doers.

" He says, "Thinkers are a dime a dozen.

Everybody can think great thoughts.

Doers are rare.

Thinker-doers are rarest.

" Right.

All right.

So, um, I, you know, we need people that are architects that

that think but they need to have a view of they gotta do more than just think

right?

Right.

They gotta make sure that whatever they're, they're doing is actually gonna

um, meet whatever goals or constraints that are put forward for whatever they're architecting.

So your first major job out of college was at DuPont working on a project for Scott Paper

is that close?

Scott Paper, yeah.

Yeah.

And you were using a computer and at some point the computer became far more interesting than the paper project itself

I'm guessing.

Yeah, I, you know, I graduated.

..

I- the school I went to was a liberal arts school and they were religiously affiliated with the congregational church

loosely.

Um, although in 19- the early 1960s it was much stronger than it is now.

It's hardly any relationship now, but, um

I didn't have any idea what I wanted to do and a lot of things about college were like

you know, I went to college basically to play sports.

I didn't go to college because I had some vision that I wanted to be anything.

I just wanted to play sports, and this was a place that I could play sports and

uh, I could get my.

..

I couldn't afford to go to school anywhere

so I could get there and do that.

But I got real interested in math and I got interested in physics

and, uh, I spent most of my time in math and physics in

in college.

So when I graduated.

..

And one of the things I liked to do was I

I, I worked, um, summers building barns.

I built pole barns.

Okay.

And, um, I ran the crew to build pole barns for this company at the age of 18.

 Um, so I like to build things so I wanted.

..

I thought, you know, I'd really like to find an engineering job so I'm looking for an engineering job and I'm sending resumes to

to, uh, the aerospace industry, you know

and everywhere.

Nobody wants anything to do with me.

So I sent this thing to DuPont, res- you know

said, "Hey, you know, here's what I'm interested in.

" I got a response.

So they invite me d- down there to

to interview with them and I go and

and this was.

..

It was a life lesson I learned a- and what I did there was I accepted a job there without really knowing what the job was I accepted.

So here I thought I was gonna, I was gonna work on testing methods for elastomeric materials.

Well, what I was going to work on was documenting

uh, testing methods for document- or for elastomeric materials.

And English and.

..

was not my strong suit at all and we had

we had three different, um, three different organizations that had to approve test methods.

We had manufacturing facilities, we had the place that I worked which was a

a, um, a sales service laboratory, they helped customers use our products

and then there was the research group.

So they all, they all tested these materials so they wanted standardized testing.

Well, all of him had their editors so they would all edit this stuff and I

I don't think I ever got one approved

uh, not one.

But there was a group there that was a math and stat group that did math and stat analysis of customers

uh, processes using our, our chemicals to build products.

And Scott Paper Company had invented, um

this process to make foam which was centrifugal casting.

Um, foam, if you've never watched foam made

it's magical.

It's just magic.

Um, it's usually made.

..

Well, back then, I'm sure it's not changed much

they ha- there would be a conveyor belt that's just flat and goes

goes on for as far as you can see and it's maybe six to eight feet wide

and they shoot paper out onto this and it's kind of crimped up on the sides

and they have a mixing head at the front of the

the, the.

..

one end of this and this goes around continuously on a belt.

And the mixing head takes two chemicals, just two

and they put them together and it mixes these two chemicals and pours them out on the paper

just back and forth like this, so it's this puddle.

Within about 20 feet, this has risen to be about this high.

It's just magical.

Right.

And so they.

..

At that time they were, um, they were

um, making.

..

This is a time when.

..

I don't know if you remember, there was a time when we went through where a lot of garments that were outdoor garments had foam insulation in them.

Right.

Well, that was, that was made out of these.

..

The- these things were cut up into 60-foot long what they called logs.

So you imagine you have this thing six foot wide

four feet high, and 60 foot long

and now you got to make a sheet of this so they can use it in textile stuff.

So, uh, they would take the stuff and cut it up into

um.

..

That was comp, sorry, that was called a bun.

They cut this up in what they call logs

and logs were like maybe a foot and a half square and then across

whatever, four foot across.

Then they drill a hole through them and put them on a mandrel so they could spin them

and they'd spin them on a mandrel and

and with a slitter, and peel off- Okay.

.

..

a long sheet.

And that's what they used in the textile stuff.

Well, Scott Paper Company decided that this was

um, too much waste because you have to knock all the corners off and you just throw them away.

So they decided they, they'd try to invent centrifugal casting

so they invented this machine.

In this machine, you know the caged roll- roller bearing looks like?

Yep.

Well, think of this as a, a caged roller bearing that is

like, 30 feet long and about maybe five foot in diameter.

And sitting on this big thing at an angle and spinning

it has rollers in it.

There's rollers all around in it, there's some drive somewhere that's driving this thing so it's going like this.

And at the top of this, they shoot pieces of paper in that are about this wide

with some glue on it so it glues

and they have a mixing head with a pourer.

And they pour the foam down into the

the top of this thing like this barrel and it spins.

And as it travels down, it, it does its thing and it expands

and they had, at the other end

they had like a buzz saw saw that sawed these things off into 15-foot chunks what they called zarks.

Okay.

So a zark was a cylinder with a wall thickness of about like that

and the thinking was that they just put that on a big mandrel and spin it

and they'd have none of that knocking off the corners.

Right.

So I got enlisted.

..

Well, the Math and Stat group asked me if I would be interested in working on a computer simulation model for this process

what they were doing, and I said sure.

I was so bored.

I mean, they coulda asked me if I wanted to be the janitor and I woulda probably said

"Yeah, that would be more interesting," what I was doing.

So I said yes, and so we decided we're gonna do this

um, in a discrete simulation language called GPSS-III.

And if you're.

..

Yeah, you're familiar at all with discrete simulation?

Yep.

Mm-hmm.

Okay.

So it's like, it's- it's a time interval thing and it- it

the clock just jumps and each, each interval there's some set of de- event- discrete events that occur.

So off I go to Pisc- Poughkeepsie to go to the IBM GPSS-III school

which was quite an experience, and learn GPSS-III.

And there's people there, uh, there, I remember there were people there from Otis Elevator.

Okay.

They were doing a simulation of, um

the algorithms they're using to send elevators in high-rise

uh, um, business offices, you know

um.

..

That's what we simulated.

Elevators and traffic lights.

 Right.

So, um, I come back and I

you know, I go up and I meet all the people at Scott Paper Company and they assign.

..

They have an intern they assign to work with me that's

we're gonna sorta work together on this thing.

And, um, I'm gonna develop the model and I'm gonna try to

you know, transfer whatever knowledge I have of the model to him because when after I'm off this

he's gonna be on it.

So, um, I start developing this model and this is

the language is, is like a flowchart language where you have little boxes and little boxes do certain things.

And it's all sequential.

Okay.

Um, you know, basically there's no, there's no real parallelism in it at all

# Chapter 11

the algorithms they're using to send elevators in high-rise

uh, um, business offices, you know

um.

..

That's what we simulated.

Elevators and traffic lights.

 Right.

So, um, I come back and I

you know, I go up and I meet all the people at Scott Paper Company and they assign.

..

They have an intern they assign to work with me that's

we're gonna sorta work together on this thing.

And, um, I'm gonna develop the model and I'm gonna try to

you know, transfer whatever knowledge I have of the model to him because when after I'm off this

he's gonna be on it.

So, um, I start developing this model and this is

the language is, is like a flowchart language where you have little boxes and little boxes do certain things.

And it's all sequential.

Okay.

Um, you know, basically there's no, there's no real parallelism in it at all

so it's, it's a consequential thing.

And so you put all, you connect all these things together just like you're drawing a flowchart.

In fact, you draw a flowchart to represent your program.

And then you, you take your flowchart and you punch up each one of these boxes as a certain

um, encoding on a punch card.

And you, you know, basically put them in the computer and it

it doesn't really compile anything.

I think if, all, all you could think of this is

is just recording of this big, um

piece of data, uh, it's a data-driven simulation.

So it's, well, this is more than the data

this is, this is actually the logic.

So it's sorta like a program, and there sorta is things like

there was g- things like go-tos and things like that.

And so I developed this model, you know

and I'm happily doing this and I had.

..

You know, in my life I'd never worked on anything that was really exacting.

You know if you're building a barn, you know if it's

if it's an eighth inch off, that's nothing.

Right.

Even if you get them a half inch 

I mean, okay?

You could cover that up.

But somehow, you know, things like key punch errors and things like that just didn't go through the computer very well .

Right.

Well, this was all unknownst to me

and so then finally the day arrived, the IBM representative and my boss and the guy that

that I worked with at, that worked at Di- uh

DuPont, and the, the guy from Scott Paper Company were all gonna go to the data center in Philadelphia to run this GPSS-III program on their 7044.

So off we go and we get there and

and this is, th- you can't imagine the madhouse of being in a data center where all the

all the time is scheduled.

There's no, there's no sharing of anything.

..

. um, everything is, there's a little time stamp machine.

You know, you grab a piece of paper and you go over and you get it stamped.

Says your start time.

It's a say- they'll tell you when your start time

or tell you when you can go on.

You go over and you punch this thing

the start time.

You run over to the computer and, you know

do your work and then you run back over and stamp your thing.

So, you know, we go through all this and we go to the computer and we load up the deck of cards and everything and spin the tapes and the whole works and

you know, it reads about 10 cards and rolls over dead.

Y- you know, "What's wrong?

" And it turns out I got, like

out of, out of.

..

My model is like, I would say about a thousand cards

thousand statements, and I probably got 500 errors.

We spent the whole day trying to fix the errors and never got them fixed.

You know, you, we'd create more errors.

Right.

And so, you know, that, that was the first experience.

That was the most humiliating day, I think

of my life.

I just, like, thinking about, "How can I possibly make s- this many pr- errors?

" So we went back to DuPont and I decided that what I was gonna do was.

..

We had a compute service there at the engineering department that was an 1108

which was a UNIVAC machine.

Well, actually it was 1107 at that time.

And my group, which was this math and stat group

said, "Well, you can run Fortran programs down there anytime you want to.

" So I decide I'm gonna write this Fortran program that's gonna look at all these cards and get rid of all my errors.

All my, my key punch errors.

So, and in those days, y- y- not very many people really punched their own cards.

They just corrected.

Right.

So you had.

..

You take, y- you know, you write all this stuff up and you tend it to the

you send it to the key punch.

Then key punch would punch it all.

One person would punch it and then another person would verify it all.

And even after all that, you know

there were still all these errors.

Right.

So I write this program in Fortran, which is

I.

..

This program must have been the most god-awful looking program ever written by man

that actually went through and found all of the problems and now we could go back to the data center and run again.

So we go back to the data center and

you know, now I'm dealing with logic errors and we're going back and forth and somewhere in this process

I decide that I'd like to know more about the machine.

You know, compilers really baffled me at that time.

Like, you know, like, certainly the machine can't take in this text and do something with it.

What's going on here?

So I decided I'd learn something about the machine

so I get a 7044 assembly language manual and one of the

one of the, uh, blocks, these

these things were blocks, this, that you had symbols for in the flowchart

was called a help block.

In a help block, you could write your own code.

So say, "Geez, what can I dream up that I've gotta have a help block for?

"  So I had about.

..

When I ended up, I had about a thousand card help block

all f- 7044 assembler and somewhere in there I decided that I

you know, I was really more interested in the computers than solving problems with computers.

Right.

So that, and that happened in, you know

like '67 or somewhere along there.

So correct me if I'm wrong, but I'm guessing that even the original release of NT was too much for any person to keep in their head in detail or was it still compact enough that you could understand the whole thing at that time?

Um, I think that it was compact that you could understand

uh, the conc- You understand the concepts of how everything's working.

Um, it definitely was big enough that  you couldn't have the code all in your own

you know, nobody could know all the code.

Was the move to Xbox in any way a desire to work on a smaller

more self-contained system that you could have greater control over or- No.

.

.

just good opportunity?

I, you know, I was, I was really bored with Azure.

We got to the point in Azure where

you know, the hypervisor was working and we did a lot of operating system work there in the beginning

'cause we had a host system there and we didn't use Hyper-V and we didn't run Windows in the host system and eventually

Azure has actually, uh, replaced the original hypervisor with Hyper-V and they've replaced the host system with

you know, a standard Windows system.

But at that point, we weren't, didn't have any plans to do that and I was just sort of bored and so this opportunity came up

uh, to go do this and I went and

um, listened to what they're doing and I

I got a chance to look at this.

One of the things I got a chance to look at was what

um, became HoloLens and some of their embryonic stuff at that.

Right.

Um, and, but at that time, it was

you know, you're required this big tether  you know

and a big cable off your headset to your th- server computer to run all the stuff for the.

..

But it was fantastic graphics.

3D was unbelievable.

Anyway, the, um, it was mainly to just to have

you know.

..

I was looking for something to do.

So I think there's a tendency with programmers to

the first time they attack a problem, they don't know what they're doing yet

so they write a terrible version of it.

The second time they think they understand and they make a super complicated version of it and over-engineer it

and then the third time they scale back and figure out what they were really gonna do in the first place and do it right that time.

Do you have any sense of that progression from RSX to VMS to NT?

Or are they all pretty much locked in for the time that they were in the market?

Or let me put it this way.

If you had to rewrite any of them now

would it be significantly different?

Um,  probably not.

Um,  RSX-11M was definitely not an over-extended system.

I had a, I made a stamp-up that says

"Size is the goal.

" Right.

And I stamped everything with, "Size is the goal.

" So it was very constrained.

We had to run in, um, 32K bytes of memory

and in 32K bytes of memory, you had to be able to run the file system.

You had to run the Fortran compiler.

Right.

You had to run the linker.

Um, so it was extremely constrained.

VMS, uh, was constrained too because, um

there was the time, val- uh, the time

um, that we basically had to do it was gonna be short and we were really w- where this was the first system we were gonna introduce paging into and

you know, even though the PDP-10 had

had, uh, didn't ha- it, PDP-10 did not have paging.

It had swapping.

And, um, all of the, um

the hype or whatever about paging just wasn't very good.

It was that paging systems basically didn't work very well and we spent an awful lot of time on VMS trying to make sure that we did things in a way that the paging would be good.

Um, one of the problems we had with VM- uh

VMS was very small page size.

That didn't help.

So VMS was constrained by the ship date

so we didn't have any grand ideas.

Um, one thing that we did do with VMS was we

we thought we did, was we looked at Unix for a little while and tried to pick the things that we thought were good features in Unix and bring them into VMS and

um, I don't think that anybody would ever say that they thought any feature in VMS looked like Unix but- Right.

.

..

uh, um, uh, NT, um, would probably be the one that maybe we were a little bit more optimistic about.

However, there's one thing in the middle of this that

that, that s- maybe saved NT and that's Mica.

Mica was very grandiose.

Extremely grandiose and one of the things, in fact

it scared the hell out of me that we'd ever be able to build it.

Um, it was very complicated.

Um, it was designed by, you know

like, I don't know, a dozen and a half people in a room together.

Um, and a lot of, uh, a lot of people that were on the design team had almost zero experience with actually building an operating system

so, you know, e- everybody, everybody that's a user thinks that

well, everything should be an op- you know

it should be a service.

We, an operating system service is like

and not thinking of it in terms of

well, is that something that really b- belongs in the operating system or is it s- something that belongs in a subsystem or something that belongs as a library or whatever?

And so they're, they're, they tend to

to gravitate towards features that are, just shouldn't be in the operating system at all.

So we had a lot of that, a lot of arguments about that.

But Mica probably helped trim down NT quite a bit.

Um, the whole object architecture in, in

in Mica was extremely baroque and extremely w- it was a multi-level architecture with containers and protection at each level and access controls and all sorts of stuff and

and after having done NT and finding out that the handle table translation was so important

I mean, it would've been like that would've been just a disaster .

It would've been, yeah, real disaster.

So no, I don't think any of them were over grandiose.

Um, I think NT is, is, um

proven itself to be very malleable, very extendable

um.

You know, um, we keep hitting security problems

um, but, you know, the security problems are

are different.

Um, I remember back with VMS we tried to

it- at the end of VMS, um

we tried to build a ASIC, what was called an ASICure VMS system and it was a single user system and it ran excruciatingly slow.

Excruciatingly slow.

But the level of things that were considered to be security issues then are not the same as they are now.

I mean, the stuff now is.

..

The worst problems aren't the problems that are bugs.

It's the problems where, where there's some phenomena that sprouts up because of the hardware or some

um, way that people find to use the hardware in a way that lets 'em break the system.

Um, you know, the recent example, um

of this is some ha- well, I guess I- you

uh, you probably would call these hardware bugs but.

..

..

. the bugs where, um, there was something called the threshold bug.

Okay.

And threshold was caused by.

..

 On In- this is an Intel only problem.

It didn't happen on AMD.

You know, all these processors are doing a lot of speculation these days and they're doing

uh, they're executing way ahead.

And on Intel, when they hit a

uh, an access violation, they just, they just put a

# Chapter 12

I mean, the stuff now is.

..

The worst problems aren't the problems that are bugs.

It's the problems where, where there's some phenomena that sprouts up because of the hardware or some

um, way that people find to use the hardware in a way that lets 'em break the system.

Um, you know, the recent example, um

of this is some ha- well, I guess I- you

uh, you probably would call these hardware bugs but.

..

..

. the bugs where, um, there was something called the threshold bug.

Okay.

And threshold was caused by.

..

 On In- this is an Intel only problem.

It didn't happen on AMD.

You know, all these processors are doing a lot of speculation these days and they're doing

uh, they're executing way ahead.

And on Intel, when they hit a

uh, an access violation, they just, they just put a

set a bit that said, "Okay,  this is bad.

" And let that keep right on going

they just kept right on pre- speculating.

And then some time later, that instruction tries to retire and it says

"Oh, it's bad.

" And now what they have to do is they have to unwind everything.

And they unwind it all.

That's good, everything's cool, and except for one thing.

They allowed software to access variables that weren't in the cache that were accessible after having discovered an access violation.

Oh, okay.

So that gave people a way to decode things by looking at the timing.

AMD did not have that problem.

AMD as soon as they hit- they saw the access violation

they said, "That's it.

" And cut them off.

So there is a problem that was a security problem that caused a lot of upheaval.

Um, the latest one is this one which

um, they're all side channel.

Most of this, a lot of this stuff lately has been side channel stuff.

This is where you do something here and somebody.

..

You do something and somebody can infer something from that.

Um, but they c- they don't have a direct channel with the data

but they discover what the data is based on a side effect of what you did.

And this has to do most, or this particular one has to do a lot with

uh, what's called the branch target buffer.

Okay.

And, you know, I have branch prediction and branch prediction predicts branches.

But the branch target buffer predicts where the next instruction is.

And you'd think, "How in the world could that work?

" You know, like, they keep this cache of where

where the next instruction's gonna be.

They access the cache, and if it looks legitimate they start.

..

That, that's where the next instructions come from.

Well, you can cause a leak of information if you can figure out how the branch target buffer works and kind of preload it

and then ask the operating system to do something knowing that what

what it's gonna do with that speculation that you've loaded into the branch target buffer in such a way that you can get cache timing information

which then you can translate into data.

Okay.

That's Spectre.

So the security problems, um, have changed a lot.

Uh, and, you know, on Xbox we had.

..

Xboxes is, um, to our knowledge has not been broken.

 That doesn't mean it can't be broken.

But we have a, we had a team

uh, that twice tried to break into Xbox and they actually got in.

And the way these guys, um, they just

um, have a different mindset  of the way they think about things and what.

..

making things do things.

Um, typically they'll find a bug and they'll ex- uh

a bug that, that's doesn't look like it's disastrous on the surface but it turns out that it gives them enough information that they can cause something to occur.

And then they do something that, um

writes over the stack, and you do a return.

Um, writing over function variables is a popular one.

Of course, all of these things that we

we try to mitiga- mitigate all these things in the operating system.

Anyway, I don't know how we got down that path

but.

..

Well, I got two good questions left.

Um, one, I don't know if we talked about it yet

but one thing that always fascinated me back in the day was Lego or BBT.

And it was- BBT?

Yeah.

And the reordering of code in order to get jumps to be more predictable or closer and

um, better locality of cache reference and everything else.

And it seemed to have a pretty good performance impact on binaries.

Is that a public tool yet?

Is that something other people can run on or is it still an exclusive Microsoft technology?

I think BBT is still Microsoft.

I mean, I'm not absolutely sure.

I don't think we run BBT on as many things these days as we used to.

Um.

..

I guess memory pressure's not the same as it used to be either

so.

..

Uh, well BBT was basically reor- reorganizing things so that you get all the stuff that you don't execute out of the way.

Right.

And the stuff that you do execute, you have together.

Um, I don't know how much stuff.

You know, I- the Windows stuff, I don't know how much is BBT.

But you know what?

It's, I think it's still, um, you know

it's, that's a significant performance thing.

Um, it's like five, 5%.

Um, I just haven't been involved.

We do, we do Pogo now too.

That's.

..

We did, you know, when we did BBT

uh, Pogo was kind of a.

..

Well, there's a couple things.

I don't know what Pogo is.

Pogo is progr- program, profile, uh, guided optimization.

Okay.

So basically, BBT, uh, does profile.

It, pro- you could call that profile-guided optimization too

but it's being done by a tool that's run over the binary after the fact.

And, you know, it has to keep up with all the stuff that they do to change the format of the binary and stuff that's in the binary and whatever.

Whereas the, the.

..

..

. Pogo is done by the compiler.

So Pogo can ingest the, the, the data from the profile into the com- compilation of the code and produce code based on that.

Okay.

All right.

The other thing that I don't think that we had at that time

that was as well developed, was whole program optimization.

Link time code generation.

Okay.

All right.

So, you know, basically we, we motion-.

..

we mostly compiled, um, objects and then we link objects together.

And now, we emotionally compile into this intermediate language that then gets ingested by the linker

which then links the whole program- Right.

.

.

and does optimization over the whole program.

So I don't think BBT is as important as it used to be

but- Okay.

.

..

I'm, I'm, I'm not g-.

..

I can't give you a definitive answer on that.

Okay.

And that might've been- Oh, yeah.

I had a new guy start for me and

uh, you know, first thing he has to do is enlist in

uh, the source tree.

And so right before lunch, he does an enl-.

..

uh, I think it was just a straight enlistment

but we got back 45 minutes later and we could hear his phone ringing down the hall and it just kept ringing and ringing

and ringing.

 And we get there and we say

"Oh, shit.

Dave C's on the caller ID.

What do I do?

" And I said, "You better answer it.

"  And I think all you said was

"Release your fucking lock," and hung up and.

..

'cause he had locked the source tree and gone for lunch

so.

 That doesn't sound like you at all though.

Well, at that time, we had a source control system we endearingly referred to as SLIM.

And it was SLIM.

Yeah.

It was- It didn't do forks.

It didn't do anything.

It was.

..

The problem.

..

That was the, that was the original Unix source control system.

Oh, was it?

It's RCCS.

Um, they decide they're gonna build a source control system without really building a client server system.

So they say, "How are we gonna do this?

" Well, say we have remote file s- system access and we have file locks.

We'll just have the lient-.

..

the client lock the file.

So that works fine until the client fails while holding the lock.

Right.

And now, the whole source control system is down because this file.

..

this one guy, uh, his system crashed and when

yeah, when he recovers, he has no idea that he held the lock.

Right.

That's why we had all these people that were status file repair experts.

I don't know if you remember those guys.

No.

Chuck Lensmeyer was one.

You remember Chuck?

By name, but- Um, I would all the time calling him up saying

"Could you unlock this file?

" It was on a per file basis

so it wasn't like they locked the whole thing

but.

..

and it was slow.

It was excruciatingly slow.

You remember Dave Snip?

No.

He was actually at the 21st anniversary, and he was in charge of printer drivers and he was a neat guy.

He, uh, left Microsoft and went back to England and

um, I think he was from England

and started a company that does, um

I think it's sound and lighting control for

for, um, concerts.

Oh, yeah.

Great guy.

Anyway, he used to.

..

he'd run SLIM and he'd have like 10 or 15 copies of it running at once because that's the only way you could get any speed out of it.

Terrible.

That's why we had the streamlined utility for copying the kernel.

SUCK.

I remember that.

  Better than the fast u- utilities.

Well, Gordon Bell was definitely a mentor for me.

My coach in high school was definitely a men- mentor for me.

Um, other than that, I don't think I really have any mentors.

I mean, I never had anybody that

um, you know, I could go cry on their shoulder or- Right.

.

..

whatever.

Um, that was.

..

those events were more than a couple years apart.

Yeah.

I mean, I still Steve-.

..

see Steve once in a while and go to the basketball games with him.

Now that he owns the Clippers- Yeah.

.

.

and, um, play golf with him once in a while.

Not very often, but, um, you know

he's still.

..

I, I work directly for Steve for many years.

I work.

..

I started out working for Steve when I first went to the company and then they shuffled me over to Paul Maritz.

And then the one I really didn't like is when I got shuffled to Alton.

And then, uh, from there I went to Azure

which was totally different.

Wasn't any of those guys.

And then, I think when I went to Azure

I went back to reporting to Steve.

But by then, Steve is like the

the CEO of the company.

So I'm hanging off of this organization here and I never

never go to any of his meetings.

You know, never see him, but I report to him.

Sounds ideal, really.

 It was ideal.

Well, when he was.

..

when it came out that he was gonna leave

um, I sat down with him and said

"Hey, we gotta find somebody to be my boss because I don't want to end up in a situation where the new

the new CEO comes in here and, you know

of course he's gonna have to go around and glad-hand all of his direct reports.

He's gonna come and glad-hand me and then I'm not gonna show up at one of his executive meetings and he's gonna wonder why I'm not there.

" I said, "We gotta find somebody that's in the know here

right?

"   So he did, and I worked for somebody else for a while.

Um, and now I work for, uh

Phil Spencer, who is the VP of

of the Xbox division.

Okay.

How big was your org when you finally went individual contributor?

What was the biggest org when you had all of NT done?

About four, four, 450.

I did that after NT40.

Okay.

Uh.

..

I said, "I want, I don't want any more of this.

" And everything was growing at a prodigious rate.

Um, and everything really took off with NT at NT40.

Um, that's when we began to ship a lot of systems.

So a company like that, is there a big downside to not being an empire builder?

Well, I think it goes down to where your talents lie.

Right.

You know, if, if you've got, if you've got good currency that's outside of that

I don't think it makes any difference.

Yeah, a good point.

Um, but if you don't, then you better find some that you.

..

If you wanna grow like that, you better find  somewhere where you can go where you can actually do that.

Right.

That's, I think the reason I had the

the limited success I had with race car driving as late in my life as I did it

was just being able to focus on what you're doing.

So when you code, are you that.

..

Can you multitask or are you a one thing at a time kinda guy

and don't distract me, and.

..

Well, I'm sorta like, um.

..

I think multitasking is good, but I think that the highest productivity is not multitasking

because it does take some time to context switch.

Right.

Um, I do work, I do do multitasking because there'll be a sp- a problem somewhere that I'm not working on

and that somebody had a problem and I'll go f- try to fix it or whatever.

Um, but in general, I'm working on

you know, one thing.

Um, right now I'm, we're, we're trying to get in the

in the game VM space, we're running a Linux VM

and we're running a Linux VM there to be able to take advantage of some of the spare cycles we have in the data center with.

..

The consoles we're running there in something called xCloud.

Have you heard anything about xCloud?

No.

xCloud is basically taking Xbox consoles, reke- repackaging them into a rack and putting them in the data center and giving people remote access to them.

So that allows them to play basically the triple A rated games

the really high performance, high graphics resolution games.

Well, but they're single tenet systems.

Right?

One person can be playing one console.

Right.

So you have to have a lot of them.

And so there becomes a question about what to do about the duty cycle of those

because, um, people don't play 24 hours a day.

Right.

So there's a, there's a bunch of idle time.

So our plan is, is to run

um, AI and machine learning workloads that are Microsoft specific on those systems in the off hours.

# Chapter 13

in the game VM space, we're running a Linux VM

and we're running a Linux VM there to be able to take advantage of some of the spare cycles we have in the data center with.

..

The consoles we're running there in something called xCloud.

Have you heard anything about xCloud?

No.

xCloud is basically taking Xbox consoles, reke- repackaging them into a rack and putting them in the data center and giving people remote access to them.

So that allows them to play basically the triple A rated games

the really high performance, high graphics resolution games.

Well, but they're single tenet systems.

Right?

One person can be playing one console.

Right.

So you have to have a lot of them.

And so there becomes a question about what to do about the duty cycle of those

because, um, people don't play 24 hours a day.

Right.

So there's a, there's a bunch of idle time.

So our plan is, is to run

um, AI and machine learning workloads that are Microsoft specific on those systems in the off hours.

So that's what I've been working on.

And it's, uh, the first part of that was to get Linux to run with the Xbox Hypervisor

and then the second part of that has been to get the graphic stack running.

And.

..

it seems like I've been working on this forever.

Longer than VMS.

 So, you know, the, the

the University of Washington built a new computer science building a few years ago.

Yeah.

And I made a donation to the, to the thing and

and they're gonna, so they're gonna name a room

uh, actually a laboratory after me.

And I said that I'd do that, but I wanted them to put a slogan on the wall in the laboratory.

This is a big lab.

This is probably, maybe 50 by 50.

So it's a big lab.

And the, the, the slogan is, "If you don't put 'em in

you don't have to take 'em out.

" Yeah, it's hard to do, especially when you're younger and just starting and haven't paid the price of having to fix- You know- .

..

your own shit.

.

..

when I started, the debugging tools were so bad

so bad that I don't know how anybody could have that philosophy at that time

because- Right.

.

..

it was so hard to find a problem.

I mean, really hard.

I was telling you, I'm working on this KIM-1

which is a single board 6502, 64K flat model

but there's no debugging, there's no printf's.

It's got a hex keypad as your, pretty much your entry point to it.

Um, and so when you write code for that-  .

..

you have to be excruciatingly careful because the turnaround time is a mess.

Right.

But once you get the simulator on the desktop

then it's like, make run, make run

make run.

It's very easy to go back and forth.

Right.

And it totally changes the way you code

so.

The tools that we use today have, um

become so, um, functional that.

..

And, and a lot of the stuff that's been done has been aimed at trying to cut down on some of the little errors that people would make that

that aren't ma- they aren't re- like logic errors.

They're just errors that they make because they're just

um, they're not.

..

That their, their attention to detail isn't good enough or something.

And so a lot of that stuff's gone.

So I would say that, yeah, there's

there's not as much emphasis on quality, um

as there was when you were working with these machines where there's like.

..

Basically, sometimes, you know, the only way you could do anything is with a scope.

Hardware lan- a logic analyzer, and you're looking at it and saying

"Oh, well, you know.

" I was looking at an old Burroughs.

I think it's a Burroughs, and they had all the scope hookup points right inside the door

'cause you're just gonna have to always resort to it apparently

so.

I w- never worked on a Burroughs machine.

I did work on that Bunk & Ramo

which was kind of a  funny machine.

What about a Bendix?

Have you ever worked on a Bendix?

No?

That's vacuum tube days.

That's getting old, but.

..

That was before me.

Bendix was a drum machine.

Yeah.

That was the m- that was the main memory was drum

I think.

Yeah, it, it wrote, wrote and rewrote the drum every time.

It ro- rotated in e- e- the way you

you, the way you put your program on the drum was to try to make it so that when you finished the instruction execution

the drum had rotated to pick up the next instruction.

Yeah, well, the, they're all written on this drum and the drum's spinning at 3

000 RPM or some incredible speed and.

..

Those, those drums, the, the Bendix drum probably wasn't that fast.

 No.

I've never seen one running.

They're always crashed by the time I've ever seen one.

The 1108 had some drums that were just unbelievable.

They were word addressable.

Uh, they had three tracks per, uh

word.

A word was 36 bits.

So they're pulling off 12 bits in each track.

It was a 7500 RPM disc or drum

drum, and it was canonical.

So when it spun, it rose up like this to the heads

and if it lost speed, it dropped so- Okay.

.

.

that they didn't have head crashes.

What.

..

And it was just lightning fast in those days.

This was, uh, in the late '60s.

I don't know what the acc-.

..

Oh, the minimum access time of those things was like three milliseconds or something like that.

That was minimum.

No, maximum was pro- was a full rotation.

Rotation, yeah.

So, uh, and today it's, like

everything's SSDs today, so they're zero.

Right.

It's whatever the SSD's time is, so

boy does that make a difference.

Yeah.

How much vacation time you taking these days?

About the same as I've always taken.

You know, I, um, I take about six weeks a year probably.

 Um, basically I, I'm either on vacation or I'm at work.

Yeah.

Or I'm riding my bike.

Yeah.

One of the three things.

So, um, we have a place in Hawaii we

we try to go to about a one week a month through the winter.

Oh.

And then the summer is here, so.

..

And I'm still working.

Um, and I don't know what I'd do.

If I had a garage like this and interest that you have

then I'd be not working.

Right.

But I don't, so- Yeah.

Um, I'd be lost at home.

I'd, like, "What am I gonna do?

" Did you ever, um, get a chance to go down to The Living Computer Museum?

I did.

I saw it before it closed.

It was really impressive, especially because everything runs.

It's not just a static display.

Or at that time everything ran.

Rob Short and I were down there one time when they gave us a private tour

and, um, they have, they had at that time one of the basement floors was absolutely packed with equipment.

They had a lot of DEC systems, a lot of old PP8s and

um, PP11s.

Um, some 9s, some 15s.

I don't remember seeing any VAXes.

But I really like that museum, and the

the fact that they closed that and they.

..

uh, it doesn't look like there's any real plan to reopen it.

No, I've tried to find out what's going on and I haven't been able to find out anything

so.

..

I guess he didn't fund it, Paul

uh, Paul and his sister in law had tried to- He didn't

he didn't fund it in his will, apparently.

Yeah.

And which is funny because, uh, that must have been just an oversight that he didn't do that.

I- But he didn't do it with his movie theater and he didn't do it with his other thing that he had

so it seems like he didn't make any plans

which is weird.

Well, I like to go d- I like to go down there and look at those old machines.

And, you know, you, the- the Computer Museum

The Computer History Museum now is, um

all towards, um, whatever is the state of the art now and the

what people are interested in computing now.

And, and I like to look at the old stuff.

Yeah.

And see- I'm doing an episode on IBM hardware

so I went down to The Computer History Museum in Mountain View

the one you're a fellow at.

Or your picture's on the wall anyway, I remember that.

Um.

..

That's got to be The Computer History Museum then.

Yeah, which one were you talking about?

That's what I was talking about.

Local here or down in Mountain View?

No, no, down there is a Computer History Museum.

Oh, okay.

There- Here is The Living Computer Museum.

And this one up here is The Living History Computer Museum.

Okay.

So I've been to both, yes.

Um-  Yes.

Oh yeah, so I went through and I

I docu- or I filmed all the old

you know, the 1104 and all the old IBMs along the way

and I'm going out to Poughkeepsie in two weeks to see what their current state of the art is.

'Cause I haven't been in an IBM data center in 30 years

so I have no idea what they're making.

But I did an old episode on PC versus mainframe and what the fundamental differences are

and I think I joked that I wish IBM would send me an old System/360 or something for the shop.

And they actually called and they were talking about it but the power requirements are a bit much and they're three-phase and

um.

..

figured out you could actually run it but it's easier just to go on tour what they've got rather than.

..

My buddy down the road, he had a shop here and he just had a big one-phase motor spinning a big three-phase motor- Yeah.

.

..

and it would spin the three phase mo- three-phase motor backwards and the leads came off and it ran his mill and his

all his equipment.

Worked fine.

 So-  Surprised me, but.

..

Well, there's a lot of interesting old

uh, IBM stuff.

Um.

..

I mean, I would m- I would be most interested in seeing some of their old stuff like

uh, Stretch.

Yeah.

Um, and some of the stuff, the 709

704, some of those machines.

Um, I, I did work on the 7044 which was sort of a

an offshoot I think of the 7094.

Anyway, they're all 36-bit machines.

All those original machines were 36 bits.

Why 36?

Is that what you need for precision when you convert to floating-point?

It was sp- yeah, we.

..

It was floating-point precision.

IBM came out with the 360.

You know, they came out with a 24-bit mantissa with a hidden bit.

The 36-bit floating point did not have a hidden bit.

You mean the implied first bit or whatever?

Yeah.

Yeah.

It was not hidden.

So the mantissa was the mantissa, period.

And the, the IBM system came out with a hidden bit which gave them one more bit of precision

but 24 bits is still pretty s- pretty slim.

And even, I mean, people complain about 64 bits

either range-wise or precision-wise, one of the two.

 Maybe you try it.

Maybe you- Maybe you try it.

Maybe you-

